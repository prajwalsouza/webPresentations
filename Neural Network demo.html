<html>
	<head>
		<title> Prajwal DSouza </title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<style type="text/css">
			* {
				transition: opacity 1s, visibility 1s, x 1s, y 1s;
			}
		</style>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- <script src="snap.svg-min.js" type="text/javascript"></script> -->
	</head>
	<body style='margin:0px;width:100%; height: 400%;'>
		<div id='displayDiv' height="100%" width="100%" style="background-size: cover; z-index:1; position: fixed; left:0px; top:0px;right:0px;bottom: 0px;" >
			<svg id='introduction' height="100%" width="100%">
				<text id='introtext' x="50%" y="50%" fill="black" font-family="Calibri" style='font-size:35px;font-size: 3.4vw;' text-anchor="middle">
					A Neural Network Demo
				</text>
			</svg>
		</div>


	</body>

	<script type="text/javascript">

		displaySvg = document.getElementById('introduction')

		slide1Elements = []
		slide2Elements = []
		slide3Elements = []
		slide4Elements = []
		slide5Elements = []
		slide6Elements = []

		function setOpacities(slideElements, value) {
			for (i=0; i<slideElements.length; i++) {
				slideElements[i].style.opacity = value;
				if (value == 1) {
					slideElements[i].style.pointerEvents = 'auto';
				}
				else if (value == 0) {
					slideElements[i].style.pointerEvents = 'none';
				}
			}
		}

		function setVisibilities(slideElements, value) {
			for (i=0; i<slideElements.length; i++) {
				slideElements[i].style.opacity = value;
			}
		}

		function setEventStatus(slideElements, value, type, func) {
			if(value == 'switch-on') {
				for (i=0; i<slideElements.length; i++) {
					slideElements[i].addEventListener(type, func)
				}
			}
			else if(value == 'switch-off') {
				for (i=0; i<slideElements.length; i++) {
					slideElements[i].removeEventListener(type, func)
				}
			}
				
		}

		function classDirect(vec) {
			vec = JSON.stringify(vec)
			if (vec == JSON.stringify([0,1,0,1,1,1,0,1,0])) {
				return 'Plus'
			}
			else if (vec == JSON.stringify([0,0,0,1,1,1,0,0,0])) {
				return 'Minus'
			}
			else if (vec == JSON.stringify([1,0,1,0,1,0,1,0,1])) {
				return 'Cross'
			}
			else {
				return 'Something else'
			}
		}

		imagevectordict = {}
		imagevector = [0,1,0,1,1,1,0,1,0]

		function statechange(event) {
			statevalue = imagevector[event.target.id[4]]
			if (statevalue == 0) {
				imagevector[event.target.id[4]] = 1
				event.target.style.fill = 'rgba(0,0,0,1)'
				document.getElementById('box value ' + event.target.id[4]).innerHTML = 1
			}
			else {
				imagevector[event.target.id[4]] = 0
				event.target.style.fill = 'hsla(277,100%,50%,0.4)'
				document.getElementById('box value ' + event.target.id[4]).innerHTML = 0
			}
			document.getElementById('classdisplay').innerHTML = classDirect(imagevector)
		}

		slide0Elements = [document.getElementById('introtext')]

		boxwidth = window.innerHeight/20;
		boxheight = window.innerHeight/20;
		boxgap = window.innerHeight/80;


		// Lower Layer Additions (Slide 4)

		weightvalue = {}
		weightInfo = {}

		function determineNsuffix(value) {
			if (typeof value == 'number') {
				if (value == 1) {
					return 'st'
				}
				else if (value == 2) {
					return 'nd'
				}
				else if (value == 3) {
					return 'rd'
				}
				else if (value > 3) {
					return 'th'
				}
				else if (value == 0) {
					return 'th'
				}
			}				
			else if (typeof value == 'string'){
				return ''
			}
			else {
				return ''
			}
		}

		minWeightValue = -1
		maxWeightValue = 1

		function weightHover(event) {
			weightdata = weightInfo[event.target.id]
			document.getElementById('infoDisplay').innerHTML = 'The weight you selected is connected to ' + weightdata[0] + determineNsuffix(weightdata[0]) + ' neuron in the ' + weightdata[2] + determineNsuffix(weightdata[2]) + ' layer, from the ' + weightdata[1] + determineNsuffix(weightdata[1]) + ' neuron in the ' + weightdata[3] + determineNsuffix(weightdata[3])  + ' layer. It currently has a value of ' + weightvalue[event.target.id].toFixed(4) + ''
			event.target.style.stroke = 'hsla(210,100%,50%,1)'
			event.target.style.strokeWidth = '0.3%'
		}

		function weightHoverOut(event) {
			document.getElementById('infoDisplay').innerHTML = ''
			event.target.style.stroke = 'hsla(32,100%,50%,1)'
			modulatedWidth = ((0.07)*(weightvalue[event.target.id] - minWeightValue)/(maxWeightValue - minWeightValue)) + 0.07
			event.target.style.strokeWidth = modulatedWidth +'%';
		}


		// hidden weights
		weightsElements = []

		inputToFirstWeightElements = []
		for (k=0; k<9; k++) {
			for (i=0; i<9; i++) {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1','15%');
				lineElement.setAttribute('y1',(window.innerHeight/13)*(k+1));
				lineElement.setAttribute('x2','30%');
				lineElement.setAttribute('id','weight ' + i + '-' + k + '-' + 1);
				lineElement.setAttribute('y2',(window.innerHeight/13)*(i+1));
				lineElement.style.stroke = 'hsla(32,100%,50%,1)'
				weightvalue['weight ' + i + '-' + k + '-' + 1] = (Math.random() - 0.5)*2
				modulatedWidth = ((0.07)*(weightvalue['weight ' + i + '-' + k + '-' + 1] - minWeightValue)/(maxWeightValue - minWeightValue)) + 0.07
				lineElement.style.strokeWidth = modulatedWidth +'%';
				lineElement.style.cursor = 'pointer';
				displaySvg.appendChild(lineElement);
				weightsElements.push(lineElement)
				inputToFirstWeightElements.push(lineElement)
				
				weightInfo['weight ' + i + '-' + k + '-' + 1] = [i,k,1,'input']
				lineElement.addEventListener('mouseover', weightHover)
				lineElement.addEventListener('mouseout', weightHoverOut)
			}
		}

		firstToSecondWeightElements = []

		for (k=0; k<9; k++) {
			for (i=0; i<9; i++) {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1','30%');
				lineElement.setAttribute('y1',(window.innerHeight/13)*(k+1));
				lineElement.setAttribute('x2','45%');
				lineElement.setAttribute('id','weight ' + i + '-' + k + '-' + 2);
				lineElement.setAttribute('y2',(window.innerHeight/13)*(i+1));
				lineElement.style.stroke = 'hsla(32,100%,50%,1)'
				weightvalue['weight ' + i + '-' + k + '-' + 2] = (Math.random() - 0.5)*2
				modulatedWidth = ((0.07)*(weightvalue['weight ' + i + '-' + k + '-' + 2] - minWeightValue)/(maxWeightValue - minWeightValue)) + 0.07
				lineElement.style.strokeWidth = modulatedWidth +'%';
				lineElement.style.cursor = 'pointer';
				displaySvg.appendChild(lineElement);
				weightsElements.push(lineElement)
				firstToSecondWeightElements.push(lineElement)
				weightInfo['weight ' + i + '-' + k + '-' + 2] = [i,k,2,1]
				lineElement.addEventListener('mouseover', weightHover)
				lineElement.addEventListener('mouseout', weightHoverOut)
			}
		}

		secondToOutputWeightElements = []

		for (k=0; k<9; k++) {
			for (i=0; i<4; i++) {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1','45%');
				lineElement.setAttribute('y1',(window.innerHeight/13)*(k+1));
				lineElement.setAttribute('x2','60%');
				lineElement.setAttribute('id','weight ' + i + '-' + k + '-' + 'output');
				lineElement.setAttribute('y2',(window.innerHeight/12)*(i+3));
				lineElement.style.stroke = 'hsla(32,100%,50%,1)'
				weightvalue['weight ' + i + '-' + k + '-' + 'output'] = (Math.random() - 0.5)*2
				modulatedWidth = ((0.07)*(weightvalue['weight ' + i + '-' + k + '-' + 'output'] - minWeightValue)/(maxWeightValue - minWeightValue)) + 0.07
				lineElement.style.strokeWidth = modulatedWidth +'%';
				lineElement.style.cursor = 'pointer';
				displaySvg.appendChild(lineElement);
				weightsElements.push(lineElement)
				secondToOutputWeightElements.push(lineElement)
				weightInfo['weight ' + i + '-' + k + '-' + 'output'] = [i,k,'output',2]
				lineElement.addEventListener('mouseover', weightHover)
				lineElement.addEventListener('mouseout', weightHoverOut)
			}
		}

		// Lower Layer Additions (Slide 5)

		biasWeightElements = []
		layerOneBiasWeightElements = []

		for (i=0; i<9; i++) {
			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1','15%');
			lineElement.setAttribute('y1',(window.innerHeight/13)*(10));
			lineElement.setAttribute('x2','30%');
			lineElement.setAttribute('id','bias weight ' + i + '-bias-' + 1);
			lineElement.setAttribute('y2',(window.innerHeight/13)*(i+1));
			lineElement.style.stroke = 'hsla(32,100%,50%,1)'
			weightvalue['bias weight ' + i + '-bias-' + 1] = (Math.random() - 0.5)*2
			modulatedWidth = ((0.07)*(weightvalue['bias weight ' + i + '-bias-' + 1] - minWeightValue)/(maxWeightValue - minWeightValue)) + 0.07
			lineElement.style.strokeWidth = modulatedWidth +'%';
			lineElement.style.cursor = 'pointer';
			displaySvg.appendChild(lineElement);
			biasWeightElements.push(lineElement)
			layerOneBiasWeightElements.push(lineElement)
			weightInfo['bias weight ' + i + '-bias-' + 1] = [i,'bias',1,'input']
			lineElement.addEventListener('mouseover', weightHover)
			lineElement.addEventListener('mouseout', weightHoverOut)
		}

		layerTwoBiasWeightElements = []

		for (i=0; i<9; i++) {
			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1','30%');
			lineElement.setAttribute('y1',(window.innerHeight/13)*(10));
			lineElement.setAttribute('x2','45%');
			lineElement.setAttribute('id','bias weight ' + i + '-bias-' + 2);
			lineElement.setAttribute('y2',(window.innerHeight/13)*(i+1));
			lineElement.style.stroke = 'hsla(32,100%,50%,1)'
			weightvalue['bias weight ' + i + '-bias-' + 2] = (Math.random() - 0.5)*2
			modulatedWidth = ((0.07)*(weightvalue['bias weight ' + i + '-bias-' + 2] - minWeightValue)/(maxWeightValue - minWeightValue)) + 0.07
			lineElement.style.strokeWidth = modulatedWidth +'%';
			lineElement.style.cursor = 'pointer';
			displaySvg.appendChild(lineElement);
			biasWeightElements.push(lineElement)
			layerTwoBiasWeightElements.push(lineElement)
			weightInfo['bias weight ' + i + '-bias-' + 2] = [i,'bias',2,1]
			lineElement.addEventListener('mouseover', weightHover)
			lineElement.addEventListener('mouseout', weightHoverOut)
		}

		layerOutputBiasWeightElements = []

		for (i=0; i<4; i++) {
			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1','45%');
			lineElement.setAttribute('y1',(window.innerHeight/13)*(10));
			lineElement.setAttribute('x2','60%');
			lineElement.setAttribute('id','bias weight ' + i + '-bias-' + 'output');
			lineElement.setAttribute('y2',(window.innerHeight/12)*(i+3));
			lineElement.style.stroke = 'hsla(32,100%,50%,1)'
			weightvalue['bias weight ' + i + '-bias-' + 'output'] = (Math.random() - 0.5)*2
			modulatedWidth = ((0.07)*(weightvalue['bias weight ' + i + '-bias-' + 'output'] - minWeightValue)/(maxWeightValue - minWeightValue)) + 0.07
			lineElement.style.strokeWidth = modulatedWidth +'%';
			lineElement.style.cursor = 'pointer';
			displaySvg.appendChild(lineElement);
			biasWeightElements.push(lineElement)
			layerOutputBiasWeightElements.push(lineElement)
			weightInfo['bias weight ' + i + '-bias-' + 'output'] = [i,'bias','output',2]
			lineElement.addEventListener('mouseover', weightHover)
			lineElement.addEventListener('mouseout', weightHoverOut)
		}

		setOpacities(biasWeightElements, 0)




		// Slide 1

		
		slide1EventElements = []
		boxElements = []
		elementPositions = []

		function slide1() {
			
			for(i = 0; i < 3; i++) {
				for(j = 0; j < 3; j++) {
					var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
					rectElement.setAttribute('height',boxheight);
					rectElement.setAttribute('width', boxwidth);
					val = (j*1) + (i*3)
					rectElement.setAttribute('id', 'box ' + val);
					rectElement.setAttribute('x', (j*(boxwidth+boxgap)) + window.innerWidth/4);
					rectElement.setAttribute('y', (i*(boxheight+boxgap)) + window.innerHeight/3);
					rectElement.style.opacity = 1;
					if (imagevector[val] == 0) {
						rectElement.style.fill = 'hsla(277,100%,50%,0.4)'
					}
					else {
						rectElement.style.fill = 'rgba(0,0,0,1)'
					}
					
					rectElement.style.strokeWidth = '0';
					displaySvg.appendChild(rectElement);
					slide1Elements.push(rectElement)
					slide1EventElements.push(rectElement)
					boxElements.push(rectElement)
					rectElement.addEventListener('mouseover', statechange)
				}
			}

			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', '60%');
			textElement.setAttribute('y', '45%');
			textElement.setAttribute('text-anchor', 'middle');
			textElement.setAttribute('id', 'classdisplay');
			textElement.setAttribute('font-family', 'Calibri');
			textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
			textElement.innerHTML = classDirect(imagevector)
			displaySvg.appendChild(textElement);
			slide1Elements.push(textElement)

			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', '60%');
			textElement.setAttribute('y', '40%');
			textElement.setAttribute('text-anchor', 'middle');
			textElement.setAttribute('id', 'classdisplaytext');
			textElement.setAttribute('font-family', 'Calibri');
			textElement.setAttribute('fill', 'hsla(190,100%,50%,1)');
			textElement.setAttribute('style', 'font-size:15px;font-size: 2vw;');
			textElement.innerHTML = 'Class Type'
			displaySvg.appendChild(textElement);
			slide1Elements.push(textElement)

			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', '50%');
			textElement.setAttribute('y', '80%');
			textElement.setAttribute('text-anchor', 'middle');
			textElement.setAttribute('id', 'instructionaboutclass');
			textElement.setAttribute('font-family', 'Calibri');
			textElement.setAttribute('fill', 'rgba(0,0,0,1)');
			textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
			textElement.innerHTML = 'In this demo, we hope to identify three patterns formed on the grid. Plus, Cross and Minus.'
			displaySvg.appendChild(textElement);
			slide1Elements.push(textElement)

		}

		slide1()
		
		setOpacities(slide1Elements, 0)
		setEventStatus(slide1EventElements, 'switch-off', 'mouseover', statechange)


		// Slide 2

		function neuronHover(event) {
			theID = event.target.id
			document.getElementById('infoDisplay').innerHTML = "You just selected the " + nonBiasNeuronValueAndName[theID][1] + determineNsuffix(nonBiasNeuronValueAndName[theID][1]) + " neuron of the " + nonBiasNeuronValueAndName[theID][2] + " layer. It's current value is " + nonBiasNeuronValueAndName[theID][0].toFixed(4) + "."
		}
		

		function neuronHoverOut(event) {
			document.getElementById('infoDisplay').innerHTML = ""
		}

		nonBiasNeuronValueAndName = {}
		

		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '60%');
		textElement.setAttribute('y', '45%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide2inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'The image "pixels" are converted into an array (a string of 1s and 0s),'
		displaySvg.appendChild(textElement);
		slide2Elements.push(textElement)

		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '60%');
		textElement.setAttribute('y', '50%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide2inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'and this is fed to what is called the input layer.'
		displaySvg.appendChild(textElement);
		slide2Elements.push(textElement)

		inputLayerNeuronElements = []
		inputLayerNeuronElementValue = {}

		for (i=0; i<9; i++) {
			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
			circleElement.setAttribute('cx', '15%');
			circleElement.setAttribute('cy',  (window.innerHeight/13)*(i+1));	
			circleElement.setAttribute('id', 'input layer ' + i);
			circleElement.setAttribute('r', '1.5%');
			circleElement.setAttribute('fill','hsla(190,100%,50%,1)')
			displaySvg.appendChild(circleElement);
			slide2Elements.push(circleElement)
			inputLayerNeuronElements.push(circleElement)
			inputLayerNeuronElementValue['input layer ' + i] = 0
			circleElement.addEventListener('mouseover', neuronHover)
			circleElement.addEventListener('mouseout', neuronHoverOut)
			circleElement.style.cursor = 'pointer'
			nonBiasNeuronValueAndName[circleElement.id] = [0, i, 'input']
		}

		for (i=0; i<boxElements.length; i++) {
			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', '5%');
			textElement.setAttribute('y', (window.innerHeight/13)*(i+1) + boxwidth/4);
			textElement.setAttribute('text-anchor', 'middle');
			textElement.setAttribute('id', 'box value ' + i);
			textElement.setAttribute('font-family', 'Calibri');
			textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
			textElement.innerHTML = imagevector[i]
			displaySvg.appendChild(textElement);
			slide2Elements.push(textElement)
		}

		setOpacities(slide2Elements, 0)

		function tranferToInputLayer() {
			for(i=0; i<inputLayerNeuronElements.length;i++) {
				neuronOfInterest = document.getElementById('input layer ' + i)
				neuronOfInterest.style.transition = 'fill 2s'
				neuronOfInterest.style.fill = 'hsla(190,100%,'+ (1 - imagevector[i])*50 + '%,1)'
				inputLayerNeuronElementValue['input layer ' + i] = imagevector[i]
				nonBiasNeuronValueAndName[neuronOfInterest.id][0] = imagevector[i]
			}
		}

		timeouts = []

		function slide2(state) {
			if(state == 'appear'){
				for (i=0; i<boxElements.length; i++) {
					boxElements[i].setAttribute('x', '7%')
					boxElements[i].setAttribute('y', (window.innerHeight/13)*(i+1) - 2*(boxwidth)/4)
				}
				setOpacities(slide2Elements, 1)
				timeouts.push(setTimeout( function(){
					tranferToInputLayer()
				}  , 1000 ));
			}
			else if(state == 'disappear'){
				for(i = 0; i < 3; i++) {
					for(j = 0; j < 3; j++) {
						val = (j*1) + (i*3)
						boxElement = document.getElementById('box ' + val)
						boxElement.setAttribute('x', (j*(boxwidth+boxgap)) + window.innerWidth/4)
						boxElement.setAttribute('y', (i*(boxheight+boxgap)) + window.innerHeight/3)
					}
				}
				setOpacities(slide2Elements, 0)	
				for(i=0; i<timeouts.length; i++) {
					clearTimeout(timeouts[i])				}
				timeouts = []
			}
		}


		// Slide 3



		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '50%');
		textElement.setAttribute('y', '85%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide2inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'We have four possibilities. Hence, four outputs.'
		displaySvg.appendChild(textElement);
		slide3Elements.push(textElement)

		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '50%');
		textElement.setAttribute('y', '90%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide2inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'and this forms the output layer.'
		displaySvg.appendChild(textElement);
		slide3Elements.push(textElement)

		classesID = ['Plus', 'Minus', 'Cross', 'Something else']

		outputLayerElements = []
		outputLayerElementValue = {}

		for (i=0; i<4; i++) {
			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', '65%');
			textElement.setAttribute('y', (window.innerHeight/12)*(i+3));
			textElement.setAttribute('id', 'class value ' + i);
			textElement.setAttribute('font-family', 'Calibri');
			textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
			textElement.innerHTML = classesID[i]
			displaySvg.appendChild(textElement);
			slide3Elements.push(textElement)

			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
			circleElement.setAttribute('cx', '60%');
			circleElement.setAttribute('cy', (window.innerHeight/12)*(i+3));	
			circleElement.setAttribute('id', 'classbox value ' + i);
			circleElement.setAttribute('r', '1.5%');
			circleElement.setAttribute('fill','hsla(190,100%,50%,1)')
			displaySvg.appendChild(circleElement);
			slide3Elements.push(circleElement)
			outputLayerElements.push(circleElement)
			outputLayerElementValue['classbox value ' + i] = 0
			circleElement.addEventListener('mouseover', neuronHover)
			circleElement.addEventListener('mouseout', neuronHoverOut)
			circleElement.style.cursor = 'pointer'
			nonBiasNeuronValueAndName[circleElement.id] = [0, i, 'output']
		}

		setOpacities(slide3Elements, 0)

		function slide3(state) {
			if(state == 'appear'){
				setOpacities(slide3Elements, 1)
			}
			else if(state == 'disappear'){
				setOpacities(slide3Elements, 0)	
			}
		}


		// Slide 4


		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '80%');
		textElement.setAttribute('y', '45%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide4inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'The network will have two hidden layers.'
		displaySvg.appendChild(textElement);
		slide4Elements.push(textElement)

		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '80%');
		textElement.setAttribute('y', '50%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide4inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'Each with the same number of "Neurons"'
		displaySvg.appendChild(textElement);
		slide4Elements.push(textElement)


		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '50%');
		textElement.setAttribute('y', '90%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide4inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'Each layer is connected by a set of lines called "weights".'
		displaySvg.appendChild(textElement);
		slide4Elements.push(textElement)

		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '50%');
		textElement.setAttribute('y', '95%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'infoDisplay');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:10px;font-size: 2vw;');
		textElement.innerHTML = ''
		displaySvg.appendChild(textElement);
		slide4Elements.push(textElement)
		slide5Elements.push(textElement)
		slide6Elements.push(textElement)

		

		hiddenLayerNeurons = []

		
		firstLayerNeuronElements = []
		firstLayerNeuronElementValue = {}
		for (i=0; i<9; i++) {
			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
			circleElement.setAttribute('cx', '30%');
			circleElement.setAttribute('cy',  (window.innerHeight/13)*(i+1));	
			circleElement.setAttribute('id', 'hidden layer one ' + i);
			circleElement.setAttribute('r', '1.5%');
			circleElement.setAttribute('fill','hsla(190,100%,50%,1)')
			displaySvg.appendChild(circleElement);
			slide4Elements.push(circleElement)
			hiddenLayerNeurons.push(circleElement)
			firstLayerNeuronElements.push(circleElement)
			firstLayerNeuronElementValue['hidden layer one ' + i] = 0
			circleElement.addEventListener('mouseover', neuronHover)
			circleElement.addEventListener('mouseout', neuronHoverOut)
			circleElement.style.cursor = 'pointer'
			nonBiasNeuronValueAndName[circleElement.id] = [0, i, 'first hidden']
		}


		secondLayerNeuronElements = []
		secondLayerNeuronElementValue = {}
		for (i=0; i<9; i++) {
			var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
			circleElement.setAttribute('cx', '45%');
			circleElement.setAttribute('cy',  (window.innerHeight/13)*(i+1));	
			circleElement.setAttribute('id', 'hidden layer two ' + i);
			circleElement.setAttribute('r', '1.5%');
			circleElement.setAttribute('fill','hsla(190,100%,50%,1)')
			displaySvg.appendChild(circleElement);
			slide4Elements.push(circleElement)
			hiddenLayerNeurons.push(circleElement)
			secondLayerNeuronElements.push(circleElement)
			secondLayerNeuronElementValue['hidden layer two ' + i] = 0
			circleElement.addEventListener('mouseover', neuronHover)
			circleElement.addEventListener('mouseout', neuronHoverOut)
			circleElement.style.cursor = 'pointer'
			nonBiasNeuronValueAndName[circleElement.id] = [0, i, 'second hidden']
		}

		setOpacities(slide4Elements, 0)
		setOpacities(weightsElements, 0)

		timeouts = []

		function slide4(state) {
			if(state == 'appear'){
				setOpacities(slide4Elements, 1)
				setOpacities(outputLayerElements, 1)
				timeouts.push(setTimeout( function(){
					setOpacities(weightsElements, 1)
				}  , 700 ));
			}
			else if(state == 'disappear'){
				setOpacities(slide4Elements, 0)
				setOpacities(weightsElements, 0)
				for(i=0; i<timeouts.length; i++) {
					clearTimeout(timeouts[i])				}
				timeouts = []
			}
		}



		// Slide 5

		biasValue = {}
		biasElements = []

		function biasHover(event) {
			document.getElementById('infoDisplay').innerHTML = "You just selected the " + event.target.id + ". It's value is a constant and is equal to " + biasValue[event.target.id] + "."
		}

		function biasHoverOut(event) {
			document.getElementById('infoDisplay').innerHTML = ""
		}



		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '70%');
		textElement.setAttribute('y', '90%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide5inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'And it also has weights associated with it.'
		displaySvg.appendChild(textElement);
		slide5Elements.push(textElement)

		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '70%');
		textElement.setAttribute('y', '85%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide5inst');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = "Each layer has an additional neuron called the 'bias'."
		displaySvg.appendChild(textElement);
		slide5Elements.push(textElement)

		
		var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
		circleElement.setAttribute('cx', '15%');
		circleElement.setAttribute('cy',  (window.innerHeight/13)*(10));	
		circleElement.setAttribute('id', 'bias neuron of input layer');
		circleElement.setAttribute('r', '1.5%');
		circleElement.setAttribute('fill','hsla(270,100%,0%,1)')
		circleElement.style.cursor = 'pointer'
		biasValue['bias neuron of input layer'] = 1
		displaySvg.appendChild(circleElement);
		slide5Elements.push(circleElement)
		biasElements.push(circleElement)
		circleElement.addEventListener('mouseover', biasHover)
		circleElement.addEventListener('mouseout', biasHoverOut)

		var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
		circleElement.setAttribute('cx', '30%');
		circleElement.setAttribute('cy',  (window.innerHeight/13)*(10));	
		circleElement.setAttribute('id', 'bias neuron of layer one');
		circleElement.setAttribute('r', '1.5%');
		circleElement.setAttribute('fill','hsla(270,100%,0%,1)')
		circleElement.style.cursor = 'pointer'
		biasValue['bias neuron of layer one'] = 1
		displaySvg.appendChild(circleElement);
		slide5Elements.push(circleElement)
		biasElements.push(circleElement)
		circleElement.addEventListener('mouseover', biasHover)
		circleElement.addEventListener('mouseout', biasHoverOut)

		var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
		circleElement.setAttribute('cx', '45%');
		circleElement.setAttribute('cy',  (window.innerHeight/13)*(10));	
		circleElement.setAttribute('id', 'bias neuron of layer two');
		circleElement.setAttribute('r', '1.5%');
		circleElement.setAttribute('fill','hsla(270,100%,0%,1)')
		circleElement.style.cursor = 'pointer'
		biasValue['bias neuron of layer two'] = 1
		displaySvg.appendChild(circleElement);
		slide5Elements.push(circleElement)
		biasElements.push(circleElement)
		circleElement.addEventListener('mouseover', biasHover)
		circleElement.addEventListener('mouseout', biasHoverOut)
		

		setOpacities(slide5Elements, 0)

		timeouts = []

		function slide5(state) {
			if(state == 'appear'){
				setOpacities(slide5Elements, 1)
				setOpacities(hiddenLayerNeurons, 1)
				// setOpacities(outputLayerElements, 1)
				timeouts.push(setTimeout( function(){
					setOpacities(biasWeightElements, 1)
				}  , 700 ));
			}
			else if(state == 'disappear'){
				setOpacities(slide5Elements, 0)
				setOpacities(weightsElements, 1)
				setOpacities(biasWeightElements, 0)
				for(i=0; i<timeouts.length; i++) {
					clearTimeout(timeouts[i])				}
				timeouts = []
			}
		}


		// Slide 6


		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '70%');
		textElement.setAttribute('y', '85%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide6inst1');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = 'The information flows from one layer to the next'
		displaySvg.appendChild(textElement);
		slide6Elements.push(textElement)

		var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
		textElement.setAttribute('x', '70%');
		textElement.setAttribute('y', '90%');
		textElement.setAttribute('text-anchor', 'middle');
		textElement.setAttribute('id', 'slide6inst2');
		textElement.setAttribute('font-family', 'Calibri');
		textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
		textElement.innerHTML = "through the weights."
		displaySvg.appendChild(textElement);
		slide6Elements.push(textElement)

		setOpacities(slide6Elements, 0)


		function getMaxOfArray(numArray) {
			return Math.max.apply(null, numArray);
		}
		function getMinOfArray(numArray) {
			return Math.min.apply(null, numArray);
		}

		function initializateForwardProp() {
			for(i=0; i<outputLayerElements.length;i++) {
				textElement = document.getElementById('result values ' + i);
				textElement.style.opacity = 0
				textElement = document.getElementById('result labels ' + i);
				textElement.style.opacity = 0
			}
			
		}


		function sendFromInput() {
			for(k=0; k < inputLayerNeuronElements.length; k++) {
				neuronOfInterest = inputLayerNeuronElements[k]
				neuronOfInterest.style.transition = 'fill 2s'
				neuronOfInterest.style.fill = 'hsla(190,100%,50%,1)'
			}
			neuronOfInterest = document.getElementById('bias neuron of input layer')
			neuronOfInterest.style.transition = 'fill 2s'
			neuronOfInterest.style.fill = 'hsla(190,100%,50%,1)'

		}


		function inputToFirstLayerPropagation() {
			weightproducts = []
			sumOfProductsInputToFirst = []
			for(k=0; k < firstLayerNeuronElements.length; k++) {
				for(i=0; i< imagevector.length;i++) {
					weightproduct = weightvalue['weight ' + k + '-' + i + '-'+ 1]*imagevector[i]
					weightproducts.push(weightproduct)
				}
				weightproduct = weightvalue['bias weight ' + k + '-bias-' + 1]*biasValue['bias neuron of input layer']
				weightproducts.push(weightproduct)
			}
			maxWeightValue = getMaxOfArray(weightproducts)
			minWeightValue = getMinOfArray(weightproducts)

			for(k=0; k < firstLayerNeuronElements.length; k++) {
				sum = 0
				for(i=0; i< imagevector.length;i++) {
					weightproduct = weightvalue['weight ' + k + '-' + i + '-'+ 1]*imagevector[i]
					// displayvalue = (weightproduct - minWeightValue)/(maxWeightValue - minWeightValue)
					elementOfInterest = document.getElementById('weight ' + k + '-' + i + '-'+ 1)
					elementOfInterest.style.transition = 'stroke 1s'
					elementOfInterest.style.stroke = 'hsla( 32,100%,'+ (1 - imagevector[i])*50 + '%,1)'
					sum = sum + weightproduct
				}
				weightproduct = weightvalue['bias weight ' + k + '-bias-' + 1]*biasValue['bias neuron of input layer']
				// displayvalue = (weightproduct - minWeightValue)/(maxWeightValue - minWeightValue)
				elementOfInterest = document.getElementById('bias weight ' + k + '-bias-' + 1)
				elementOfInterest.style.transition = 'stroke 1s'
				elementOfInterest.style.stroke = 'hsla( 32,100%,'+ (1 - biasValue['bias neuron of input layer'])*50 + '%,1)'
				sum = sum + weightproduct

				sumOfProductsInputToFirst.push(sum)
			}
			return sumOfProductsInputToFirst
		}

		function sendFromInputLayerWeights() {
			for(k=0; k < firstLayerNeuronElements.length; k++) {
				for(i=0; i< imagevector.length;i++) {
					elementOfInterest = document.getElementById('weight ' + k + '-' + i + '-'+ 1)
					elementOfInterest.style.stroke = 'hsla( 32,100%,50%,1)'
				}
				
				elementOfInterest = document.getElementById('bias weight ' + k + '-bias-' + 1)
				elementOfInterest.style.transition = 'stroke 1s'
				elementOfInterest.style.stroke = 'hsla( 32,100%,50%,1)'
			}
		}

		function layerOneActivation(productSum) {
			for(k=0; k < firstLayerNeuronElements.length; k++) {
				sum = productSum[k]
				activationvalue = 1/(1+Math.exp(-sum))
				neuronOfInterest = document.getElementById('hidden layer one ' + k)
				neuronOfInterest.style.transition = 'fill 2s'
				neuronOfInterest.style.fill = 'hsla(190,100%,'+ (1 - activationvalue)*50 + '%,1)'
				firstLayerNeuronElementValue[neuronOfInterest.id] = activationvalue
				nonBiasNeuronValueAndName[neuronOfInterest.id][0] = activationvalue
			}
		}

		function sendFromLayerOne() {
			for(k=0; k < firstLayerNeuronElements.length; k++) {
				neuronOfInterest = firstLayerNeuronElements[k]
				neuronOfInterest.style.transition = 'fill 2s'
				neuronOfInterest.style.fill = 'hsla(190,100%,50%,1)'
			}
			neuronOfInterest = document.getElementById('bias neuron of layer one')
			neuronOfInterest.style.transition = 'fill 2s'
			neuronOfInterest.style.fill = 'hsla(190,100%,50%,1)'

		}

		function firstToSecondLayerPropagation() {
			weightproducts = []
			sumOfProductsFirstToSecond = []
			for(k=0; k < secondLayerNeuronElements.length; k++) {
				for(i=0; i< firstLayerNeuronElements.length;i++) {
					weightproduct = weightvalue['weight ' + k + '-' + i + '-'+ 1]*firstLayerNeuronElementValue['hidden layer one ' + i]
					weightproducts.push(weightproduct)
				}
				weightproduct = weightvalue['bias weight ' + k + '-bias-' + 2]*biasValue['bias neuron of layer one']
				weightproducts.push(weightproduct)
			}

			maxWeightValue = getMaxOfArray(weightproducts)
			minWeightValue = getMinOfArray(weightproducts)

			for(k=0; k < secondLayerNeuronElements.length; k++) {
				sum = 0
				for(i=0; i< firstLayerNeuronElements.length;i++) {
					weightproduct = weightvalue['weight ' + k + '-' + i + '-'+ 1]*firstLayerNeuronElementValue['hidden layer one ' + i]
					// displayvalue = (weightproduct - minWeightValue)/(maxWeightValue - minWeightValue)
					elementOfInterest = document.getElementById('weight ' + k + '-' + i + '-'+ 2)
					elementOfInterest.style.transition = 'stroke 1s'
					elementOfInterest.style.stroke = 'hsla( 32,100%,'+ (1 - firstLayerNeuronElementValue['hidden layer one ' + i])*50 + '%,1)'
					sum = sum + weightproduct
				}
				weightproduct = weightvalue['bias weight ' + k + '-bias-' + 2]*biasValue['bias neuron of layer one']
				// displayvalue = (weightproduct - minWeightValue)/(maxWeightValue - minWeightValue)
				elementOfInterest = document.getElementById('bias weight ' + k + '-bias-' + 2)
				elementOfInterest.style.transition = 'stroke 1s'
				elementOfInterest.style.stroke = 'hsla( 32,100%,'+ (1 - biasValue['bias neuron of layer one'])*50 + '%,1)'
				sum = sum + weightproduct

				sumOfProductsFirstToSecond.push(sum)
			}
			return sumOfProductsFirstToSecond
		}

		function layerTwoActivation(productSum) {
			for(k=0; k < secondLayerNeuronElements.length; k++) {
				sum = productSum[k]
				activationvalue = 1/(1+Math.exp(-sum))
				neuronOfInterest = document.getElementById('hidden layer two ' + k)
				neuronOfInterest.style.transition = 'fill 2s'
				neuronOfInterest.style.fill = 'hsla(190,100%,'+ (1 - activationvalue)*50 + '%,1)'
				secondLayerNeuronElementValue[neuronOfInterest.id] = activationvalue
				nonBiasNeuronValueAndName[neuronOfInterest.id][0] = activationvalue
			}
		}

		function sendFromLayerOneWeights() {
			for(k=0; k < secondLayerNeuronElements.length; k++) {
				for(i=0; i< firstLayerNeuronElements.length;i++) {
					elementOfInterest = document.getElementById('weight ' + k + '-' + i + '-'+ 2)
					elementOfInterest.style.stroke = 'hsla( 32,100%,50%,1)'

				}
				
				elementOfInterest = document.getElementById('bias weight ' + k + '-bias-' + 2)
				elementOfInterest.style.transition = 'stroke 1s'
				elementOfInterest.style.stroke = 'hsla( 32,100%,50%,1)'
			}
		}

		function sendFromLayerTwo() {
			for(k=0; k < secondLayerNeuronElements.length; k++) {
				neuronOfInterest = secondLayerNeuronElements[k]
				neuronOfInterest.style.transition = 'fill 2s'
				neuronOfInterest.style.fill = 'hsla(190,100%,50%,1)'
			}
			neuronOfInterest = document.getElementById('bias neuron of layer two')
			neuronOfInterest.style.transition = 'fill 2s'
			neuronOfInterest.style.fill = 'hsla(190,100%,50%,1)'

		}

		function secondToOutputLayerPropagation() {
			weightproducts = []
			sumOfProductsSecondToOutput = []
			for(k=0; k < outputLayerElements.length; k++) {
				for(i=0; i< secondLayerNeuronElements.length;i++) {
					weightproduct = weightvalue['weight ' + k + '-' + i + '-'+ 1]*secondLayerNeuronElementValue['hidden layer two ' + i]
					weightproducts.push(weightproduct)
				}
				weightproduct = weightvalue['bias weight ' + k + '-bias-' + 'output']*biasValue['bias neuron of layer two']
				weightproducts.push(weightproduct)
			}

			maxWeightValue = getMaxOfArray(weightproducts)
			minWeightValue = getMinOfArray(weightproducts)

			for(k=0; k < outputLayerElements.length; k++) {
				sum = 0
				for(i=0; i< secondLayerNeuronElements.length;i++) {
					weightproduct = weightvalue['weight ' + k + '-' + i + '-' + 'output']*secondLayerNeuronElementValue['hidden layer two ' + i]
					// displayvalue = (weightproduct - minWeightValue)/(maxWeightValue - minWeightValue)
					elementOfInterest = document.getElementById('weight ' + k + '-' + i + '-'+ 'output')
					elementOfInterest.style.transition = 'stroke 1s'
					elementOfInterest.style.stroke = 'hsla( 32,100%,'+ (1 - secondLayerNeuronElementValue['hidden layer two ' + i])*50 + '%,1)'
					sum = sum + weightproduct
				}
				weightproduct = weightvalue['bias weight ' + k + '-bias-' + 'output']*biasValue['bias neuron of layer two']
				// displayvalue = (weightproduct - minWeightValue)/(maxWeightValue - minWeightValue)
				elementOfInterest = document.getElementById('bias weight ' + k + '-bias-' + 'output')
				elementOfInterest.style.transition = 'stroke 1s'
				elementOfInterest.style.stroke = 'hsla( 32,100%,'+ (1 - biasValue['bias neuron of layer two'])*50 + '%,1)'
				sum = sum + weightproduct

				sumOfProductsSecondToOutput.push(sum)
			}
			return sumOfProductsSecondToOutput
		}

		function outputLayerActivation(productSum) {
			for(k=0; k < outputLayerElements.length; k++) {
				sum = productSum[k]
				activationvalue = 1/(1+Math.exp(-sum))
				neuronOfInterest = document.getElementById('classbox value ' + k)
				neuronOfInterest.style.transition = 'fill 2s'
				neuronOfInterest.style.fill = 'hsla(190,100%,'+ (1 - activationvalue)*50 + '%,1)'
				outputLayerElementValue[neuronOfInterest.id] = activationvalue
				nonBiasNeuronValueAndName[neuronOfInterest.id][0] = activationvalue
			}
		}

		function sendFromLayerTwoWeights() {
			for(k=0; k < outputLayerElements.length; k++) {
				for(i=0; i< secondLayerNeuronElements.length;i++) {
					elementOfInterest = document.getElementById('weight ' + k + '-' + i + '-'+ 'output')
					elementOfInterest.style.stroke = 'hsla( 32,100%,50%,1)'

				}
				
				elementOfInterest = document.getElementById('bias weight ' + k + '-bias-' + 'output')
				elementOfInterest.style.transition = 'stroke 1s'
				elementOfInterest.style.stroke = 'hsla( 32,100%,50%,1)'
			}
			document.getElementById('slide6inst1').style.opacity = 0
			document.getElementById('slide6inst2').style.opacity = 0
		}

		for(i=0; i<outputLayerElements.length;i++) {
			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', '65%');
			textElement.setAttribute('y', (window.innerHeight/12)*(i+3));
			textElement.setAttribute('id', 'result values ' + i);
			textElement.setAttribute('font-family', 'Calibri');
			textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
			textElement.style.opacity = 1
			textElement.style.transition = 'opacity 0.7s'
			textElement.innerHTML = outputLayerElementValue['classbox value ' + i].toFixed(4)
			displaySvg.appendChild(textElement);
			slide6Elements.push(textElement)
			textElement.style.opacity = 0
			textElement.style.transition = 'opacity 0.4s'
		}


		function addResults() {
			for(i=0; i<outputLayerElements.length;i++) {
				textElement = document.getElementById('result values ' + i);
				textElement.innerHTML = outputLayerElementValue['classbox value ' + i].toFixed(4)
				textElement.style.opacity = 1
			}
		}

		for(i=0; i<outputLayerElements.length;i++) {
			var textElement = document.createElementNS("http://www.w3.org/2000/svg", 'text');
			textElement.setAttribute('x', '75%');
			textElement.setAttribute('y', (window.innerHeight/12)*(i+3));
			textElement.setAttribute('id', 'result labels ' + i);
			textElement.setAttribute('font-family', 'Calibri');
			textElement.setAttribute('style', 'font-size:13px;font-size: 1.8vw;');
			textElement.innerHTML = classesID[i]
			displaySvg.appendChild(textElement);
			slide6Elements.push(textElement)
			textElement.style.opacity = 0
			textElement.style.transition = 'opacity 0.4s'
		}

		function addLabels() {
			for(i=0; i<outputLayerElements.length;i++) {
				textElement = document.getElementById('result labels ' + i);
				textElement.innerHTML = classesID[i]
				textElement.style.opacity = 1
			}
		}

		function addInstruction() {
			document.getElementById('slide6inst1').innerHTML = "The network outputs a confidence score"
			document.getElementById('slide6inst2').innerHTML = "about which category the pattern belongs to."
			document.getElementById('slide6inst1').style.opacity = 1
			document.getElementById('slide6inst2').style.opacity = 1
		}

			
		timeouts = []

		function slide6(state) {
			if(state == 'appear'){
				setOpacities(slide6Elements, 1)
				setOpacities(biasElements, 1)
				initializateForwardProp()
				timeouts.push(setTimeout( function(){
					sendFromInput()
				}  , 1000) );
				timeouts.push(setTimeout( function(){
					productSumInputToFirst = inputToFirstLayerPropagation()
				}  , 1000 ));
				timeouts.push(setTimeout( function(){
					sendFromInputLayerWeights()
				}  , 2000 ));
				timeouts.push(setTimeout( function(){
					layerOneActivation(productSumInputToFirst)
				}  , 2000 ));
				timeouts.push(setTimeout( function(){
					sendFromLayerOne()
				}  , 3000 ));
				timeouts.push(setTimeout( function(){
					productSumFirstToSecond = firstToSecondLayerPropagation()
				}  , 3000 ));
				timeouts.push(setTimeout( function(){
					layerTwoActivation(productSumFirstToSecond)
				}  , 4000 ));
				timeouts.push(setTimeout( function(){
					sendFromLayerOneWeights()
				}  , 4000 ));
				timeouts.push(setTimeout( function(){
					sendFromLayerTwo()
				}  , 5000 ));
				timeouts.push(setTimeout( function(){
					productSumSecondToOutput = secondToOutputLayerPropagation()
				}  , 5000 ));
				timeouts.push(setTimeout( function(){
					outputLayerActivation(productSumSecondToOutput)
				}  , 6000 ));
				timeouts.push(setTimeout( function(){
					sendFromLayerTwoWeights()
				}  , 6000 ));
				timeouts.push(setTimeout( function(){
					addResults()
				}  , 6500 ));
				timeouts.push(setTimeout( function(){
					addLabels()
				}  , 6800 ));
				timeouts.push(setTimeout( function(){
					addInstruction()
				}  , 6800 ));
			}
			else if(state == 'disappear'){
				setOpacities(slide6Elements, 0)
				document.getElementById('slide6inst1').innerHTML = 'The information flows from one layer to the next'
				document.getElementById('slide6inst2').innerHTML = "through the weights."
				document.getElementById('slide6inst1').style.opacity = 0
				document.getElementById('slide6inst2').style.opacity = 0
				for(i=0; i<timeouts.length; i++) {
					clearTimeout(timeouts[i])				}
				timeouts = []
			}
		}
		




		slidesnumber = 8
		transitpoints = 25
		transitlength = window.innerHeight*(slidesnumber - 1)/transitpoints;
		currentpoint = 0

		document.body.style.height = slidesnumber + '00%'

		function timeline(event) {
			scrValue = window.scrollY
			transitpoint = parseInt(scrValue/transitlength)
			if (currentpoint <= 0 && transitpoint == 1) {
				currentpoint = 1
				setOpacities(slide1Elements, 1)
				setOpacities(slide0Elements, 0)
				setEventStatus(slide1EventElements, 'switch-on', 'mouseover', statechange)
				setOpacities(weightsElements, 0)
			} 
			else if(currentpoint >= 1 && transitpoint == 0) {
				setOpacities(slide1Elements, 0)
				setOpacities(slide0Elements, 1)
				setEventStatus(slide1EventElements, 'switch-off', 'mouseover', statechange)
				currentpoint = 0
				setOpacities(weightsElements, 0)
			}
			else if(currentpoint <= 1 && transitpoint == 2) {
				slide2('appear')
				document.getElementById('instructionaboutclass').style.opacity = 0;
				document.getElementById('classdisplay').style.opacity = 0;
				document.getElementById('classdisplaytext').style.opacity = 0;
				document.getElementById('instructionaboutclass').style.pointerEvents = 'none';
				document.getElementById('classdisplay').style.pointerEvents = 'none';
				document.getElementById('classdisplaytext').style.pointerEvents = 'none';
				currentpoint = 2
				setOpacities(weightsElements, 0)
			}
			else if(currentpoint >= 2 && transitpoint == 1) {
				setOpacities(slide1Elements, 1)
				slide2('disappear')
				setEventStatus(slide1EventElements, 'switch-on', 'mouseover', statechange)
				document.getElementById('instructionaboutclass').style.pointerEvents = 'auto';
				document.getElementById('classdisplay').style.pointerEvents = 'auto';
				document.getElementById('classdisplaytext').style.pointerEvents = 'auto';
				currentpoint = 1
				setOpacities(weightsElements, 0)
			}
			else if(currentpoint <= 2 && transitpoint == 3) {
				slide3('appear')
				setOpacities(slide2Elements, 0)
				setOpacities(inputLayerNeuronElements, 1)
				currentpoint = 3
				setOpacities(weightsElements, 0)
			}
			else if(currentpoint >=3 && transitpoint == 2) {
				slide3('disappear')
				setOpacities(slide2Elements, 1)
				currentpoint = 2
				setOpacities(weightsElements, 0)
			}
			else if(currentpoint <=3 && transitpoint == 4) {
				setOpacities(slide3Elements, 0)
				slide4('appear')
				currentpoint = 4
			}
			else if(currentpoint >=4 && transitpoint == 3) {
				setOpacities(slide4Elements, 0)
				setOpacities(slide3Elements, 1)
				setOpacities(weightsElements, 0)
				slide4('disappear')
				currentpoint = 3
			}
			else if(currentpoint <=4 && transitpoint == 5) {
				setOpacities(slide4Elements, 0)
				slide5('appear')
				currentpoint = 5
			}
			else if(currentpoint >=5 && transitpoint == 4) {
				slide5('disappear')
				setOpacities(slide5Elements, 0)
				setOpacities(slide4Elements, 1)
				// setOpacities(weightsElements, 0)
				currentpoint = 4
			}
			else if(currentpoint <=5 && transitpoint == 6) {
				setOpacities(slide5Elements, 0)
				slide6('appear')
				currentpoint = 6
			}
			else if(currentpoint >=6 && transitpoint == 5) {
				slide6('disappear')
				setOpacities(slide6Elements, 0)
				setOpacities(slide5Elements, 1)
				// setOpacities(weightsElements, 0)
				currentpoint = 5
			}
		}

		window.addEventListener('scroll', timeline)



	</script>
<html>
