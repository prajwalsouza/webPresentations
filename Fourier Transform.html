<html>
	<head>
		<title> Fourier Transform Visualization</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


	</head>
	<body style='margin:0px;width:100%; height: 100%;'>
		<div id="containAll" style='margin:0px;width:100%; height: 100%;overflow: hidden; font-size: 0;'> 
			<div id="containGraph" style='margin:0px;width:100%; height: 35%;overflow: hidden;background: white;position: relative;'>
				<svg id='graphSvg' height="100%" width="100%" viewBox="0 0 100 100" preserveAspectRatio="none" style='position: absolute; z-index: 1'>

				</svg>
				<div id="containGraphtexts" style='margin:0px;width:100%; height: 100%;overflow: hidden;background: white; position: absolute; '>
				
				</div>
			</div>
			<div id="containEquationSettings" style='margin:0px;width:100%; height: 5%;overflow: hidden;background: white;box-shadow: inset 0px 0px 20px rgba(0,0,0,0.3); cursor: pointer;'>
			</div>
			<div id="containequationLab" style='margin:0px;width:100%; height: 0%;overflow: hidden;background: white;box-shadow: inset 0px -10px 20px rgba(0,0,0,0.3); transition: height 1s;'>
				<div id="equationLabTextContainer" style='margin:0px;width:100%; height: 10vh;overflow: hidden; font-size: 2vh; '>
					<div id="equationLabText" style='margin:0px;overflow: hidden;text-align: center; font-family: Calibri; font-size: 2vh; transform: translate(-50%,-50%); left: 50%; top: 50%; position: relative; '>
						The above signal is a sum, of some of the signals below.  
					</div>
				</div>
			</div>
			
			<div id="polarSection" style='margin:0px;width:40%; height: 55%;overflow: hidden; display: inline-block;background: white;'>
				<div id="containPolar" style='margin:0px;width:100%; height: 90%;overflow: hidden; display: inline-block;background: white;'>
					
				</div>
				<div id="containPolarDetails" style='margin:0px;width:100%; height: 10%;overflow: hidden; display: inline-block;background: white;position: relative;'>
					<svg id='wFsliderSvg' height="100%" width="100%" viewBox="0 0 100 100" preserveAspectRatio="none" style='position: absolute; z-index: 0'>

					</svg>
					
				</div>
			</div>
			
			<div id="containTransform" style='margin:0px;width:60%; height: 55%;overflow: hidden;display: inline-block;background: white; position: relative;'>
				<svg id='finalgraphSvg' height="90%" width="100%" viewBox="0 0 100 100" preserveAspectRatio="none" style='position: absolute; z-index: 1'>

				</svg>
				<div id="containfinalGraphtexts" style='margin:0px;width:100%; height: 90%;overflow: hidden;background: white; position: absolute; '>
				
				</div>
				<div id="containfinalblank" style='margin:0px;width:100%; height: 90%;overflow: hidden;background: white; position: relative; z-index: -1'>
					
				</div>
				<div id="containfinalGraphDetails" style='margin:0px;width:100%; height: 10%;overflow: hidden;background: white; position: relative;text-align: center; font-family: Calibri; font-size: 2vh'>
					<div id="containfinalGraphDetailsText" style='margin:0px;background: white; text-align: center; font-family: Calibri; font-size: 2vh; transform: translate(-50%,-50%); left: 50%; top: 50%; position: absolute;'>
						The almost Fourier Transform of the wave.
					</div>
					
				</div>
			</div>
			<div id="containSettings" style='margin:0px;width:100%; height: 5%;overflow: hidden;background: hsla(200 ,100%,50%,0);text-align: center; position: relative; font-family: Calibri; font-size: 2vh; cursor: pointer; box-shadow: inset 0px 0px 20px rgba(0,0,0,0.3);'>
				<div id="containSettingsText" style='margin:0px;background: hsla(200 ,100%,50%,0); text-align: center; font-family: Calibri; font-size: 2vh; transform: translate(-50%,-50%); left: 50%; top: 50%; position: absolute;'>
						Settings
				</div>
				
			</div>
		</div>
		<div id="containSettingsDiv" style='margin:0px;width:100%; height: 0%;overflow: hidden; font-size: 0; transition: height 1s; '> 
			
		</div>
		

		
		
		<script>

		if(window.innerWidth < window.innerHeight) {
			document.getElementById('containGraph').style.height = '22%'
			document.getElementById('containEquationSettings').style.height = '4%'
			document.getElementById('polarSection').style.height = '40%'
			document.getElementById('polarSection').style.width = '100%'
			document.getElementById('containTransform').style.height = '30%'
			document.getElementById('containTransform').style.width = '100%'
			document.getElementById('containSettings').style.height = '4%'
		}




		graphSvg = document.getElementById('graphSvg')


		

		graphxmax = 5

		curvepoints = 1000

		waveStatus = {}


		// Default Waves

		waveStatus[0] = [true,1,3,0,1,'cosine',[],0,0]
		waveStatus[1] = [false,1,2,0,1,'cosine',[],0,0]

		function addSWave(waveState) {
			wave = {}
			wavemax = 0
			wavemin = 0
			for (i =0; i < curvepoints; i++) {
				step = (graphxmax/curvepoints)
				xval = i*step
				ampW = waveState[1]
				freqW = waveState[2]
				phasW = waveState[3]
				shifW = waveState[4]
				if(waveState[5] == 'cosine') {
					yvalue = ampW*Math.cos(2*Math.PI*freqW*xval + phasW) + shifW
				}
				else if(waveState[5] == 'sine'){
					yvalue = ampW*Math.sin(2*Math.PI*freqW*xval + phasW) + shifW
				}
				if (i == 0) {
					wavemax = yvalue
					wavemin = yvalue
				}
				if (yvalue >= wavemax) {
					wavemax = yvalue
				}
				if (yvalue <= wavemin) {
					wavemin = yvalue
				}

				wave[xval] = yvalue;
			}
			return [wave,wavemin,wavemax]
		}


		wavedata = addSWave(waveStatus[0])
		waveStatus[0][6] = wavedata[0]
		waveStatus[0][7] = wavedata[1]
		waveStatus[0][8] = wavedata[2]

		wavedata = addSWave(waveStatus[1])
		waveStatus[1][6] = wavedata[0]
		waveStatus[1][7] = wavedata[1]
		waveStatus[1][8] = wavedata[2]

		function updateSWave(waveState,numb) {
			wave = {}
			wavemax = 0
			wavemin = 0
			for (i =0; i < curvepoints; i++) {
				step = (graphxmax/curvepoints)
				xval = i*step
				ampW = waveState[1]
				freqW = waveState[2]
				phasW = waveState[3]
				shifW = waveState[4]
				if(waveState[5] == 'cosine') {
					yvalue = ampW*Math.cos(2*Math.PI*freqW*xval + phasW) + shifW
				}
				else if(waveState[5] == 'sine'){
					yvalue = ampW*Math.sin(2*Math.PI*freqW*xval + phasW) + shifW
				}
				if (i == 0) {
					wavemax = yvalue
					wavemin = yvalue
				}
				if (yvalue >= wavemax) {
					wavemax = yvalue
				}
				if (yvalue <= wavemin) {
					wavemin = yvalue
				}

				wave[xval] = yvalue;
			}

			waveStatus[numb][6] = wave
			waveStatus[numb][7] = wavemin
			waveStatus[numb][8] = wavemax
		}

		

		function drawgraphAxes() {
			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', graphToSvgX(0) + '%');
			lineElement.setAttribute('y1', graphToSvgY(0) + '%');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.setAttribute('x2', graphToSvgX(graphxmax) + '%')
			lineElement.setAttribute('id','x main axis')
			lineElement.setAttribute('y2', graphToSvgY(0) + '%');
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			graphSvg.appendChild(lineElement);

			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', graphToSvgX(0) + '%');
			lineElement.setAttribute('y1', graphToSvgY(graphymax) + '%');
			lineElement.setAttribute('x2', graphToSvgX(0) + '%')
			lineElement.setAttribute('y2', graphToSvgY(graphymin) + '%');
			lineElement.setAttribute('id','y main axis')
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			graphSvg.appendChild(lineElement);

		}

		function updategraphAxes() {
			if (graphymax == graphymin) {
				graphymax = graphxmax + 0.5
				graphymin = graphymin - 0.5
			}
			var lineElement = document.getElementById('x main axis')
			lineElement.setAttribute('x1', graphToSvgX(0) + '%');
			lineElement.setAttribute('y1', graphToSvgY(0) + '%');
			lineElement.setAttribute('x2', graphToSvgX(graphxmax) + '%')
			lineElement.setAttribute('y2', graphToSvgY(0) + '%');

			var lineElement = document.getElementById('y main axis')
			lineElement.setAttribute('x1', graphToSvgX(0) + '%');
			lineElement.setAttribute('y1', graphToSvgY(graphymax) + '%');
			lineElement.setAttribute('x2', graphToSvgX(0) + '%')
			lineElement.setAttribute('y2', graphToSvgY(graphymin) + '%');

		}
		
		

		function drawgraphAxesTicksAndLabels() {
			numberofticks = parseInt(graphxmax)
			ticklengthsX = (graphymax - graphymin)/40
			ticklengthsY = (graphxmax - 0)/200

			for(i=0; i<numberofticks; i++) {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1', graphToSvgX(i) + '%');
				lineElement.setAttribute('y1', graphToSvgY(ticklengthsX) + '%');
				lineElement.setAttribute('x2', graphToSvgX(i) + '%')
				lineElement.setAttribute('y2', graphToSvgY(-ticklengthsX) + '%');
				lineElement.setAttribute('id', 'x tick ' + i)
				lineElement.setAttribute('vector-effect','non-scaling-stroke');
				lineElement.style.stroke = 'hsla(32,1%,70%,1)'
				lineElement.style.strokeWidth = '1.5%';
				graphSvg.appendChild(lineElement);

				var div = document.createElement("div");
				div.innerHTML = i;
				div.style.textAlign = "center";
				div.id = 'xticklabel' + i;
				div.style.position = "absolute";
				div.style.fontSize = "1vw";
				div.style.fontFamily = "Calibri";
				div.style.zIndex = '0';
				div.style.left = graphToSvgX(i + ticklengthsY) + '%'
				div.style.top =  graphToSvgY(-4*ticklengthsX) + '%'
				div.style.transform = 'translate(' + (-1)*graphToSvgX(i + ticklengthsY) +  '%, ' +  (-1)*graphToSvgY(-4*ticklengthsX) + '%)';
				document.getElementById('containGraphtexts').appendChild(div);
			}

			

			for(i=parseInt(graphymin); i<=parseInt(graphymax); i++) {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1', graphToSvgX(ticklengthsY) + '%');
				lineElement.setAttribute('y1', graphToSvgY(i) + '%');
				lineElement.setAttribute('x2', graphToSvgX(-ticklengthsY) + '%')
				lineElement.setAttribute('y2', graphToSvgY(i) + '%');
				lineElement.setAttribute('id', 'y tick ' + i)
				lineElement.setAttribute('vector-effect','non-scaling-stroke');
				lineElement.style.stroke = 'hsla(32,1%,70%,1)'
				lineElement.style.strokeWidth = '1.5%';
				graphSvg.appendChild(lineElement);

				// var div = document.createElement("div");
				// div.innerHTML = i;
				// div.style.textAlign = "center";
				// div.id = 'ytick' + i;
				// div.style.position = "absolute";
				// div.style.fontSize = "1vw";
				// div.style.fontFamily = "Calibri";
				// div.style.zIndex = '0';
				// div.style.left = graphToSvgX(-3*ticklengthsY) + '%'
				// div.style.top =  graphToSvgY(i + ticklengthsX) + '%'
				// div.style.transform = 'translate(' + (-1)*graphToSvgX(-3*ticklengthsY) +  '%, ' +  (-1)*graphToSvgY(i + ticklengthsX) + '%';
				// document.getElementById('containGraphtexts').appendChild(div);
			}
		}

		function updategraphAxesTicksAndLabels() {
			if (graphymax == graphymin) {
				graphymax = graphxmax + 0.5
				graphymin = graphymin - 0.5
			}
			numberofticks = parseInt(graphxmax)
			ticklengthsX = (graphymax - graphymin)/40
			ticklengthsY = (graphxmax - 0)/200

			for(i=0; i<numberofticks; i++) {
				var lineElement = document.getElementById('x tick ' + i)
				lineElement.setAttribute('x1', graphToSvgX(i) + '%');
				lineElement.setAttribute('y1', graphToSvgY(ticklengthsX) + '%');
				lineElement.setAttribute('x2', graphToSvgX(i) + '%')
				lineElement.setAttribute('y2', graphToSvgY(-ticklengthsX) + '%');

				var div = document.getElementById('xticklabel' + i)
				div.style.left = graphToSvgX(i + ticklengthsY) + '%'
				div.style.top =  graphToSvgY(-4*ticklengthsX) + '%'
				div.style.transform = 'translate(' + (-1)*graphToSvgX(i + ticklengthsY) +  '%, ' +  (-1)*graphToSvgY(-4*ticklengthsX) + '%)';
			}

			

			for(i=parseInt(graphymin); i<=parseInt(graphymax); i++) {
				var lineElement = document.getElementById('y tick ' + i)
				if (lineElement !== null) {
					lineElement.setAttribute('x1', graphToSvgX(ticklengthsY) + '%');
					lineElement.setAttribute('y1', graphToSvgY(i) + '%');
					lineElement.setAttribute('x2', graphToSvgX(-ticklengthsY) + '%')
					lineElement.setAttribute('y2', graphToSvgY(i) + '%');
				}
					

				// var div = document.createElement("div");
				// div.innerHTML = i;
				// div.style.textAlign = "center";
				// div.id = 'ytick' + i;
				// div.style.position = "absolute";
				// div.style.fontSize = "1vw";
				// div.style.fontFamily = "Calibri";
				// div.style.zIndex = '0';
				// div.style.left = graphToSvgX(-3*ticklengthsY) + '%'
				// div.style.top =  graphToSvgY(i + ticklengthsX) + '%'
				// div.style.transform = 'translate(' + (-1)*graphToSvgX(-3*ticklengthsY) +  '%, ' +  (-1)*graphToSvgY(i + ticklengthsX) + '%';
				// document.getElementById('containGraphtexts').appendChild(div);
			}
		}

		


		pointsDict = []

		

		function graphToSvgY(value) {
			y = ((-80)/(graphymax - graphymin))*(value - graphymin) + 90
			return y
		}

		function graphToSvgX(value) {
			x = (80/graphxmax)*(value) + 10
			return x
		}



		frequency = 2
		shift = 0

		countWaves = 0

		for (var key in waveStatus) {
			countWaves = countWaves + 1
		}

		function waveEquation(value) {
			sum = 0
			for (j=0; j<countWaves; j++) {
				if(waveStatus[j][0] == true) {
					sum = sum + waveStatus[j][6][value]
				}
			}
			return sum
		}

		curveDict = []

		graphymax = 1.5
		graphymin = -1.5

		function drawMainGraph() {
			pointsDict = []
			curveDict = []
			for (i =0; i < curvepoints; i++) {
				step = (graphxmax/curvepoints)
				xval = i*step
				yvalue = waveEquation(xval)
				curveDict.push([xval,yvalue])
				if (i == 0) {
					graphymax = yvalue
					graphymin = yvalue
				}
				if (graphymax <= yvalue) {
					graphymax = yvalue
				}
				if (graphymin >= yvalue) {
					graphymin = yvalue
				}
			}

			if (graphymax == graphymin) {
				graphymax = graphxmax + 0.5
				graphymin = graphymin - 0.5
			}

			LUgapmain = (graphymax - graphymin)/10

			graphymax = graphymax + LUgapmain
			graphymin = graphymin - LUgapmain

			drawgraphAxes()
			drawgraphAxesTicksAndLabels()

			for (i =0; i < curveDict.length; i++) {
				xval = curveDict[i][0]
				yvalue = curveDict[i][1]
				pointsDict.push([graphToSvgX(xval),graphToSvgY(yvalue)]); 
			}

			

			pString = 'M ' + pointsDict[0][0] + " " + pointsDict[0][1] + " "

			for(k = 0; k < pointsDict.length; k++) {
				pString = pString + 'L ' + pointsDict[k][0] + " " + pointsDict[k][1] + " ";
			}

			// console.log(pString)

			var pathElement = document.createElementNS("http://www.w3.org/2000/svg", 'path');
			pathElement.setAttribute('fill','transparent');
			pathElement.setAttribute('vector-effect','non-scaling-stroke');
			pathElement.setAttribute('d',pString);
			pathElement.setAttribute('id','main graph path')
			colorC = 'hsla(186,100%,50%,1)'
			pathElement.style.strokeWidth = '2%';
			pathElement.setAttribute('stroke', colorC);
			graphSvg.appendChild(pathElement);
		}

		drawMainGraph()


		function updateMainGraph() {
			pointsDict = []
			curveDict = []
			for (i =0; i < curvepoints; i++) {
				step = (graphxmax/curvepoints)
				xval = i*step
				yvalue = waveEquation(xval)
				curveDict.push([xval,yvalue])
				if (i == 0) {
					graphymax = yvalue
					graphymin = yvalue
				}
				if (graphymax <= yvalue) {
					graphymax = yvalue
				}
				if (graphymin >= yvalue) {
					graphymin = yvalue
				}
			}

			LUgapmain = (graphymax - graphymin)/10

			graphymax = graphymax + LUgapmain
			graphymin = graphymin - LUgapmain

			updategraphAxes()
			updategraphAxesTicksAndLabels()

			for (i =0; i < curveDict.length; i++) {
				xval = curveDict[i][0]
				yvalue = curveDict[i][1]
				pointsDict.push([graphToSvgX(xval),graphToSvgY(yvalue)]); 
			}

			

			pString = 'M ' + pointsDict[0][0] + " " + pointsDict[0][1] + " "

			for(k = 0; k < pointsDict.length; k++) {
				pString = pString + 'L ' + pointsDict[k][0] + " " + pointsDict[k][1] + " ";
			}


			var pathElement = document.getElementById('main graph path');
			pathElement.setAttribute('d',pString);
		}

		function shiftdirection(val) {
			if( val < 0) {
				return "down"
			}
			else if(val > 0) {
				return "up"
			}
			else {
				return ""
			}
		}


		function drawEquation() {
			var div = document.createElement("div");
			// div.innerHTML = "A cosine wave with frequency " + frequency + "Hz shifted "+ shiftdirection(shift) +" by " + Math.abs(shift) + ".";
			div.innerHTML = "Input signal"
			div.style.textAlign = "center";
			div.id = 'equation detail';
			div.style.position = "relative";
			div.style.fontSize = "2.3vh";
			div.style.fontFamily = "Calibri";
			div.style.zIndex = '0';
			div.style.left = '50%'
			div.style.top =  '50%'
			div.style.transform = 'translate(-50%,-50%)';
			document.getElementById('containEquationSettings').appendChild(div);
		}

		drawEquation()


		analysisWindow = [0,3]
		
		function drawAnalysisWindow() {
			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', graphToSvgX(analysisWindow[0]) + '%');
			lineElement.setAttribute('y1', graphToSvgY(graphymax) + '%');
			lineElement.setAttribute('x2', graphToSvgX(analysisWindow[0]) + '%')
			lineElement.setAttribute('y2', graphToSvgY(graphymin) + '%');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.style.stroke = 'hsla(32,100%,50%,0.2)'
			lineElement.style.strokeWidth = '5%';
			lineElement.style.cursor = 'ew-resize'
			graphSvg.appendChild(lineElement);

			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', graphToSvgX(analysisWindow[1]) + '%');
			lineElement.setAttribute('y1', graphToSvgY(graphymax) + '%');
			lineElement.setAttribute('x2', graphToSvgX(analysisWindow[1]) + '%')
			lineElement.setAttribute('y2', graphToSvgY(graphymin) + '%');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.style.stroke = 'hsla(32,100%,50%,0.2)'
			lineElement.style.strokeWidth = '5%';
			lineElement.style.cursor = 'ew-resize'
			graphSvg.appendChild(lineElement);

			var pathElement = document.createElementNS("http://www.w3.org/2000/svg", 'path');
			pathElement.setAttribute('fill','hsla(35,100%,50%,0.1)');
			pathElement.setAttribute('vector-effect','non-scaling-stroke');
			windowstring = "M " + graphToSvgX(analysisWindow[0]) + "," + graphToSvgY(graphymax) + " L " + graphToSvgX(analysisWindow[1]) + "," + graphToSvgY(graphymax) + " L " + graphToSvgX(analysisWindow[1]) + "," + graphToSvgY(graphymin) + " L " + graphToSvgX(analysisWindow[0]) + "," + graphToSvgY(graphymin)
			pathElement.setAttribute('d',windowstring);
			colorC = 'hsla(186,100%,50%,1)'
			pathElement.style.strokeWidth = '0';
			graphSvg.appendChild(pathElement);

			
		}

		drawAnalysisWindow()

		function makePolarFrame() {
			polarDiv = document.getElementById('containPolar')
			rectB = polarDiv.getBoundingClientRect()
			if(rectB.width < rectB.height) {
				minDimension = rectB.width
				polarSquareSide = 9*minDimension/10
				polarSquareSideGap = minDimension/20

				var div = document.createElement("div");
				div.innerHTML = "";
				div.id = 'polarFrame';
				div.style.position = "relative";
				div.style.zIndex = '0';
				div.style.left = '50%'
				div.style.top =  '50%'
				div.style.width = polarSquareSide
				div.style.height = polarSquareSide

				div.style.transform = 'translate(-50%,-50%)';
				document.getElementById('containPolar').appendChild(div);

			}
			else {
				minDimension = rectB.height
				polarSquareSide = 9*minDimension/10
				polarSquareSideGap = minDimension/20


				var div = document.createElement("div");
				div.innerHTML = "";
				div.id = 'polarFrame';
				div.style.position = "relative";
				div.style.zIndex = '0';
				div.style.left = '50%'
				div.style.top =  '50%'
				div.style.width = polarSquareSide
				div.style.height = polarSquareSide

				div.style.transform = 'translate(-50%,-50%)';
				document.getElementById('containPolar').appendChild(div);
			}

			
		}

		makePolarFrame()

		polarymin = -graphymax
		polarymax = graphymax
		polarxmax = graphymax
		polarxmin = -graphymax

		function polarToSvgY(val) {
			return (((90 - 10)/(polarymin - polarymax))*(val - polarymax)) + 10
		}

		function polarToSvgX(val) {
			return (((90 - 10)/(polarxmax - polarxmin))*(val - polarxmin)) + 10
		}


		function drawPolar() {
			document.getElementById('polarFrame').innerHTML = '<svg id="polarSvg" height="100%" width="100%" viewBox="0 0 100 100" preserveAspectRatio="none" style="position: absolute; z-index: 1">'

			polarSvg = document.getElementById('polarSvg')

			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', polarToSvgX(0) + '%');
			lineElement.setAttribute('y1', polarToSvgY(polarymin) + '%');
			lineElement.setAttribute('id', 'polar y axis');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.setAttribute('x2', polarToSvgX(0) + '%')
			lineElement.setAttribute('y2', polarToSvgY(polarymax) + '%');
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			polarSvg.appendChild(lineElement);

			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', polarToSvgX(polarxmin) + '%');
			lineElement.setAttribute('y1', polarToSvgY(0) + '%');
			lineElement.setAttribute('id', 'polar x axis');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.setAttribute('x2', polarToSvgX(polarxmax) + '%')
			lineElement.setAttribute('y2', polarToSvgY(0) + '%');
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			polarSvg.appendChild(lineElement);
		}

		function updatePolarAxes() {
			polarymin = -graphymax
			polarymax = graphymax
			polarxmax = graphymax
			polarxmin = -graphymax
			polarSvg = document.getElementById('polarSvg')

			var lineElement = document.getElementById('polar y axis')
			lineElement.setAttribute('x1', polarToSvgX(0) + '%');
			lineElement.setAttribute('y1', polarToSvgY(polarymin) + '%');
			lineElement.setAttribute('x2', polarToSvgX(0) + '%')
			lineElement.setAttribute('y2', polarToSvgY(polarymax) + '%');

			var lineElement = document.getElementById('polar x axis')
			lineElement.setAttribute('x1', polarToSvgX(polarxmin) + '%');
			lineElement.setAttribute('y1', polarToSvgY(0) + '%');
			lineElement.setAttribute('x2', polarToSvgX(polarxmax) + '%')
			lineElement.setAttribute('y2', polarToSvgY(0) + '%');
		}

		drawPolar()

		windingfrequency = 0.2


		var div = document.createElement("div");
		div.innerHTML = "Winding frequency : " + windingfrequency.toFixed(2) + " cycles/sec";
		div.id = 'windingfrequencyDisplay';
		div.style.position = "relative";
		div.style.zIndex = '0';
		div.style.left = '50%'
		div.style.top =  '50%'
		div.style.fontSize = '2vh'
		div.style.fontFamily = 'Calibri'
		div.style.textAlign =  'center'
		div.style.cursor =  'ew-resize'
		div.style.transform = 'translate(-50%,-50%)';
		document.getElementById('containPolarDetails').appendChild(div);

		pointsDictPolarActual = []


		function plotPolar() {
			pointsDictPolar = []


			for (i =0; i < curveDict.length; i++) {
				xval = curveDict[i][0]
				if (xval > analysisWindow[1]) {
					break
				}
				yvalue = curveDict[i][1]
				polarX = yvalue*Math.cos(-2*Math.PI*windingfrequency*xval)
				polarY = yvalue*Math.sin(-2*Math.PI*windingfrequency*xval)
				pointsDictPolarActual.push([polarX,polarY])
				pointsDictPolar.push([polarToSvgX(polarX),polarToSvgY(polarY)]); 
			}

			pString = 'M ' + pointsDictPolar[0][0] + " " + pointsDictPolar[0][1] + " "

			for(k = 0; k < pointsDictPolar.length; k++) {
				pString = pString + 'L ' + pointsDictPolar[k][0] + " " + pointsDictPolar[k][1] + " ";
			}

			polarSvg = document.getElementById('polarSvg')

			var pathElement = document.createElementNS("http://www.w3.org/2000/svg", 'path');
			pathElement.setAttribute('fill','transparent');
			pathElement.setAttribute('vector-effect','non-scaling-stroke');
			pathElement.setAttribute('d',pString);
			pathElement.setAttribute('id','polarcurve');
			colorC = 'hsla(186,100%,50%,1)'
			pathElement.style.strokeWidth = '2%';
			pathElement.setAttribute('stroke', colorC);
			polarSvg.appendChild(pathElement);


		}

		function updatePolar() {
			polarymin = -graphymax
			polarymax = graphymax
			polarxmax = graphymax
			polarxmin = -graphymax

			pointsDictPolar = []
			pointsDictPolarActual = []

			for (i =0; i < curveDict.length; i++) {
				xval = curveDict[i][0]
				if (xval > analysisWindow[1]) {
					break
				}
				yvalue = curveDict[i][1]
				polarX = yvalue*Math.cos(-2*Math.PI*windingfrequency*xval)
				polarY = yvalue*Math.sin(-2*Math.PI*windingfrequency*xval)
				pointsDictPolar.push([polarToSvgX(polarX),polarToSvgY(polarY)]);
				pointsDictPolarActual.push([polarX,polarY])
			}

			pString = 'M ' + pointsDictPolar[0][0] + " " + pointsDictPolar[0][1] + " "

			for(k = 0; k < pointsDictPolar.length; k++) {
				pString = pString + 'L ' + pointsDictPolar[k][0] + " " + pointsDictPolar[k][1] + " ";
			}


			var pathElement = document.getElementById('polarcurve')
			pathElement.setAttribute('d',pString);

			document.getElementById('windingfrequencyDisplay').innerHTML = "Winding frequency : " + windingfrequency.toFixed(2) + " cycles/sec";


		}


		plotPolar()
		maxwindingFrequency = 5

		function update(event) {
			var rect = event.target.getBoundingClientRect()
			posX = event.clientX - rect.left
			posY = event.clientY - rect.top
			windingfrequency = (posX)*(maxwindingFrequency)/(rect.width)
			// console.log(windingfrequency)
			document.getElementById('wfSlider').setAttribute('width', (posX)*(100)/(rect.width) + '%')
			updatePolar()
			plotCenterOfMass()
			plotCOMX()
		}

		function updateviaTouch(event) {
			var touch = event.touches[0];
			var rect = event.target.getBoundingClientRect()
			posX = touch.pageX - rect.left
			posY = touch.pageY - rect.top
			windingfrequency = (posX)*(maxwindingFrequency)/(rect.width)
			// console.log(windingfrequency)
			document.getElementById('wfSlider').setAttribute('width', (posX)*(100)/(rect.width) + '%')
			updatePolar()
			plotCenterOfMass()
			plotCOMX()
		}

		document.getElementById('containPolarDetails').addEventListener('mousemove',update)
		document.getElementById('containPolarDetails').addEventListener('touchmove',updateviaTouch)

		var circleElement = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
		circleElement.setAttribute('r','1%');
		circleElement.setAttribute('cx','0%');
		circleElement.setAttribute('cy','0%');
		circleElement.style.opacity = 0
		circleElement.style.fill = 'hsla(260,100%,50%,0.6)'
		circleElement.style.strokeWidth = '0';
		circleElement.setAttribute('id','centerOfMass');
		document.getElementById('polarSvg').appendChild(circleElement);

		var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
		lineElement.setAttribute('x1', polarToSvgX(0) + '%');
		lineElement.setAttribute('y1', polarToSvgY(0) + '%');
		lineElement.setAttribute('vector-effect','non-scaling-stroke');
		lineElement.setAttribute('x2', polarToSvgX(0) + '%')
		lineElement.setAttribute('y2', polarToSvgY(0) + '%');
		lineElement.setAttribute('id', 'x-corPolar');
		lineElement.style.stroke = 'hsla(250,100%,50%,0.5)'
		lineElement.style.strokeWidth = '2%';
		lineElement.style.opacity = 0
		polarSvg.appendChild(lineElement);

		var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
		lineElement.setAttribute('x1', polarToSvgX(0) + '%');
		lineElement.setAttribute('y1', polarToSvgY(0) + '%');
		lineElement.setAttribute('vector-effect','non-scaling-stroke');
		lineElement.setAttribute('x2', polarToSvgX(0) + '%')
		lineElement.setAttribute('y2', polarToSvgY(0) + '%');
		lineElement.setAttribute('id', 'y-corPolar');
		lineElement.style.stroke = 'hsla(250,100%,50%,0.5)'
		lineElement.style.strokeWidth = '2%';
		lineElement.style.opacity = 0
		polarSvg.appendChild(lineElement);

		plotXcor = 1
		plotYcor = 1

		cOM = [0,0]


		function plotCenterOfMass() {
			sumX = 0
			sumY = 0

			for(i = 0; i < pointsDictPolarActual.length; i++) {
				sumX = sumX + pointsDictPolarActual[i][0]
				sumY = sumY + pointsDictPolarActual[i][1]

			}

			avgX = sumX/pointsDictPolarActual.length
			avgY = sumY/pointsDictPolarActual.length

			cOM = [avgX,avgY]

			circleElement = document.getElementById('centerOfMass')
			circleElement.setAttribute('cx', polarToSvgX(avgX) + '%');
			circleElement.setAttribute('cy', polarToSvgY(avgY) + '%');
			circleElement.style.opacity = 1

			if (plotXcor == 1) {
				lineElement = document.getElementById('x-corPolar')
				lineElement.setAttribute('x1', polarToSvgX(avgX) + '%');
				lineElement.setAttribute('y1', polarToSvgY(0) + '%');
				lineElement.setAttribute('x2', polarToSvgX(0) + '%');
				lineElement.setAttribute('y2', polarToSvgY(0) + '%');
				lineElement.style.opacity = 1
			}

			if (plotYcor == 1) {
				lineElement = document.getElementById('y-corPolar')
				lineElement.setAttribute('x1', polarToSvgX(0) + '%');
				lineElement.setAttribute('y1', polarToSvgY(avgY) + '%');
				lineElement.setAttribute('x2', polarToSvgX(0) + '%');
				lineElement.setAttribute('y2', polarToSvgY(0) + '%');
				lineElement.style.opacity = 1
			}

		}

		plotCenterOfMass()


		finalgraphymax = graphymax
		finalgraphymin = -graphymax

		finalgraphxmax = maxwindingFrequency

		finalgraphSvg = document.getElementById('finalgraphSvg')
		function finalgraphToSvgY(value) {
			y = ((-80)/(finalgraphymax - finalgraphymin))*(value - finalgraphymin) + 90
			return y
		}

		function finalgraphToSvgX(value) {
			x = (80/finalgraphxmax)*(value) + 10
			return x
		}


		function svgXPercentToFinalGraph(value) {
			x = (value - 10)*finalgraphxmax/80
			return x
		}


		function drawgraphAxesFinalPlot() {
			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', finalgraphToSvgX(0) + '%');
			lineElement.setAttribute('y1', finalgraphToSvgY(0) + '%');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.setAttribute('x2', finalgraphToSvgX(finalgraphxmax) + '%')
			lineElement.setAttribute('y2', finalgraphToSvgY(0) + '%');
			lineElement.setAttribute('id', 'final plot x axis');
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			finalgraphSvg.appendChild(lineElement);

			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', finalgraphToSvgX(0) + '%');
			lineElement.setAttribute('y1', finalgraphToSvgY(finalgraphymax) + '%');
			lineElement.setAttribute('x2', finalgraphToSvgX(0) + '%')
			lineElement.setAttribute('y2', finalgraphToSvgY(finalgraphymin) + '%');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.setAttribute('id', 'final plot y axis');
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			finalgraphSvg.appendChild(lineElement);

		}

		function updategraphAxesFinalPlot() {
			var lineElement = document.getElementById('final plot x axis')
			lineElement.setAttribute('x1', finalgraphToSvgX(0) + '%');
			lineElement.setAttribute('y1', finalgraphToSvgY(0) + '%');
			lineElement.setAttribute('x2', finalgraphToSvgX(finalgraphxmax) + '%')
			lineElement.setAttribute('y2', finalgraphToSvgY(0) + '%');
			
			var lineElement = document.getElementById('final plot y axis')
			lineElement.setAttribute('x1', finalgraphToSvgX(0) + '%');
			lineElement.setAttribute('y1', finalgraphToSvgY(finalgraphymax) + '%');
			lineElement.setAttribute('x2', finalgraphToSvgX(0) + '%')
			lineElement.setAttribute('y2', finalgraphToSvgY(finalgraphymin) + '%');

		}

		

		var ellipseElement = document.createElementNS("http://www.w3.org/2000/svg", 'ellipse');
		ellipseElement.setAttribute('rx','1%');
		ellipseElement.setAttribute('ry','1%');
		ellipseElement.setAttribute('cx','0%');
		ellipseElement.setAttribute('cy','0%');
		ellipseElement.setAttribute('vector-effect','non-scaling-stroke')
		ellipseElement.style.opacity = 0
		ellipseElement.style.fill = 'hsla(260,100%,50%,0.6)'
		ellipseElement.style.strokeWidth = '0';
		ellipseElement.setAttribute('id','centerOfMassX');
		document.getElementById('finalgraphSvg').appendChild(ellipseElement);

		function plotCOMX() {
			ellipseElement = document.getElementById('centerOfMassX')
			ellipseElement.style.opacity = 1
			if (windingfrequency < finalgraphxmax) {
				ellipseElement.setAttribute('cx', finalgraphToSvgX(windingfrequency) + '%');
				ellipseElement.setAttribute('cy', finalgraphToSvgY(cOM[0]) + '%');
				scalevalue = 1
				ww = finalgraphSvg.getBoundingClientRect().width
				hh = finalgraphSvg.getBoundingClientRect().height
				if(hh < ww) {
					ellipseElement.setAttribute('rx',scalevalue*(hh/ww) + '%');
					ellipseElement.setAttribute('ry',scalevalue + '%');
				}
				else {
					ellipseElement.setAttribute('ry',scalevalue*(ww/hh) + '%');
					ellipseElement.setAttribute('rx',scalevalue + '%');
				}
			}
			
		}

		function drawfinalgraphAxesTicksAndLabels() {
			numberofticks = parseInt(finalgraphxmax)
			ticklengthsX = (finalgraphymax - finalgraphymin)/40
			ticklengthsY = (finalgraphxmax - 0)/200

			for(i=0; i<numberofticks; i++) {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1', finalgraphToSvgX(i) + '%');
				lineElement.setAttribute('y1', finalgraphToSvgY(ticklengthsX) + '%');
				lineElement.setAttribute('x2', finalgraphToSvgX(i) + '%')
				lineElement.setAttribute('y2', finalgraphToSvgY(-ticklengthsX) + '%');
				lineElement.setAttribute('vector-effect','non-scaling-stroke');
				lineElement.setAttribute('id', 'final graph xtick ' + i);
				lineElement.style.stroke = 'hsla(32,1%,70%,1)'
				lineElement.style.strokeWidth = '1.5%';
				finalgraphSvg.appendChild(lineElement);

				var div = document.createElement("div");
				div.innerHTML = i;
				div.style.textAlign = "center";
				div.id = 'xtick final ' + i;
				div.style.position = "absolute";
				div.style.fontSize = "1vw";
				div.style.fontFamily = "Calibri";
				div.style.zIndex = '0';
				div.style.left = finalgraphToSvgX(i + ticklengthsY) + '%'
				div.style.top =  finalgraphToSvgY(-4*ticklengthsX) + '%'
				div.style.transform = 'translate(' + (-1)*finalgraphToSvgX(i + ticklengthsY) +  '%, ' +  (-1)*finalgraphToSvgY(-4*ticklengthsX) + '%)';
				document.getElementById('containfinalGraphtexts').appendChild(div);
			}

			

			for(i=parseInt(finalgraphymin); i<=parseInt(finalgraphymax); i++) {
				var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
				lineElement.setAttribute('x1', finalgraphToSvgX(ticklengthsY) + '%');
				lineElement.setAttribute('y1', finalgraphToSvgY(i) + '%');
				lineElement.setAttribute('x2', finalgraphToSvgX(-ticklengthsY) + '%')
				lineElement.setAttribute('y2', finalgraphToSvgY(i) + '%');
				lineElement.setAttribute('vector-effect','non-scaling-stroke');
				lineElement.setAttribute('id', 'final graph ytick ' + i);
				lineElement.style.stroke = 'hsla(32,1%,70%,1)'
				lineElement.style.strokeWidth = '1.5%';
				finalgraphSvg.appendChild(lineElement);

				// var div = document.createElement("div");
				// div.innerHTML = i;
				// div.style.textAlign = "center";
				// div.id = 'ytick' + i;
				// div.style.position = "absolute";
				// div.style.fontSize = "1vw";
				// div.style.fontFamily = "Calibri";
				// div.style.zIndex = '0';
				// div.style.left = finalgraphToSvgX(-3*ticklengthsY) + '%'
				// div.style.top =  finalgraphToSvgY(i + ticklengthsX) + '%'
				// div.style.transform = 'translate(' + (-1)*finalgraphToSvgX(-3*ticklengthsY) +  '%, ' +  (-1)*finalgraphToSvgY(i + ticklengthsX) + '%';
				// document.getElementById('containGraphtexts').appendChild(div);
			}
		}


		function updatefinalgraphAxesTicksAndLabels() {
			numberofticks = parseInt(finalgraphxmax)
			ticklengthsX = (finalgraphymax - finalgraphymin)/40
			ticklengthsY = (finalgraphxmax - 0)/200

			for(i=0; i<numberofticks; i++) {
				var lineElement = document.getElementById('final graph xtick ' + i)
				if (lineElement !== null) {
					lineElement.setAttribute('x1', finalgraphToSvgX(i) + '%');
					lineElement.setAttribute('y1', finalgraphToSvgY(ticklengthsX) + '%');
					lineElement.setAttribute('x2', finalgraphToSvgX(i) + '%')
					lineElement.setAttribute('y2', finalgraphToSvgY(-ticklengthsX) + '%');
				}

				var div = document.getElementById('xtick final ' + i)
				div.innerHTML = i;
				div.style.left = finalgraphToSvgX(i + ticklengthsY) + '%'
				div.style.top =  finalgraphToSvgY(-4*ticklengthsX) + '%'
				div.style.transform = 'translate(' + (-1)*finalgraphToSvgX(i + ticklengthsY) +  '%, ' +  (-1)*finalgraphToSvgY(-4*ticklengthsX) + '%)';
			}

			

			for(i=parseInt(finalgraphymin); i<=parseInt(finalgraphymax); i++) {
				var lineElement = document.getElementById('final graph ytick ' + i)
				if (lineElement !== null) {
					lineElement.setAttribute('x1', finalgraphToSvgX(ticklengthsY) + '%');
					lineElement.setAttribute('y1', finalgraphToSvgY(i) + '%');
					lineElement.setAttribute('x2', finalgraphToSvgX(-ticklengthsY) + '%')
					lineElement.setAttribute('y2', finalgraphToSvgY(i) + '%');
				}
				

				// var div = document.createElement("div");
				// div.innerHTML = i;
				// div.style.textAlign = "center";
				// div.id = 'ytick' + i;
				// div.style.position = "absolute";
				// div.style.fontSize = "1vw";
				// div.style.fontFamily = "Calibri";
				// div.style.zIndex = '0';
				// div.style.left = finalgraphToSvgX(-3*ticklengthsY) + '%'
				// div.style.top =  finalgraphToSvgY(i + ticklengthsX) + '%'
				// div.style.transform = 'translate(' + (-1)*finalgraphToSvgX(-3*ticklengthsY) +  '%, ' +  (-1)*finalgraphToSvgY(i + ticklengthsX) + '%';
				// document.getElementById('containGraphtexts').appendChild(div);
			}
		}


		
		transformPointsDict = []
		initTransformPointsDict = []

		function plotTransform() {
			curvepointsT = curvepoints/100
			if (curvepointsT <= 10) {
				curvepointsT = 100
			}

			for (i = 0; i < curvepointsT; i++) {
				step = (finalgraphxmax/curvepointsT)
				wf = i*step

				temppointsDictPolarActual = []

				for (k =0; k < curveDict.length; k++) {
					xval = curveDict[k][0]
					if (xval > analysisWindow[1]) {
						break
					}
					yvalue = curveDict[k][1]
					polarX = yvalue*Math.cos(-2*Math.PI*wf*xval)
					polarY = yvalue*Math.sin(-2*Math.PI*wf*xval)
					temppointsDictPolarActual.push([polarX,polarY])
				}

				sumX = 0
				sumY = 0

				for(m = 0; m < temppointsDictPolarActual.length; m++) {
					sumX = sumX + temppointsDictPolarActual[m][0]
					sumY = sumY + temppointsDictPolarActual[m][1]

				}

				avgX = sumX/temppointsDictPolarActual.length
				avgY = sumY/temppointsDictPolarActual.length

				tempcOM = [avgX,avgY]
				
				if (i == 0) {
					finalgraphymax = avgX
					finalgraphymin = avgX
				}
				if (finalgraphymax <= avgX) {
					finalgraphymax = avgX
				}
				if (finalgraphymin >= avgX) {
					finalgraphymin = avgX
				}

				initTransformPointsDict.push([wf,avgX])

			}

			drawfinalgraphAxesTicksAndLabels()
			drawgraphAxesFinalPlot()
			plotCOMX()

			for(b=0; b < initTransformPointsDict.length; b++) {
				wf = initTransformPointsDict[b][0]
				avgX = initTransformPointsDict[b][1]
				transformPointsDict.push([finalgraphToSvgX(wf),finalgraphToSvgY(avgX)])
			}

			pString = 'M ' + transformPointsDict[0][0] + " " + transformPointsDict[0][1] + " "

			for(k = 0; k < transformPointsDict.length; k++) {
				pString = pString + 'L ' + transformPointsDict[k][0] + " " + transformPointsDict[k][1] + " ";
			}

			// console.log(pString)

			var pathElement = document.createElementNS("http://www.w3.org/2000/svg", 'path');
			pathElement.setAttribute('fill','transparent');
			pathElement.setAttribute('vector-effect','non-scaling-stroke');
			pathElement.setAttribute('d',pString);
			pathElement.setAttribute('id','final curve path');
			colorC = 'hsla(300,100%,50%,0.1)'
			pathElement.style.strokeWidth = '2%';
			pathElement.setAttribute('stroke', colorC);
			finalgraphSvg.appendChild(pathElement);
				
		}

		function updateplotTransform() {
			transformPointsDict = []
			initTransformPointsDict = []
			curvepointsT = curvepoints/100
			if (curvepointsT <= 10) {
				curvepointsT = 100
			}
			for (i = 0; i < curvepointsT; i++) {
				step = (finalgraphxmax/curvepointsT)
				wf = i*step

				temppointsDictPolarActual = []

				for (k =0; k < curveDict.length; k++) {
					xval = curveDict[k][0]
					if (xval > analysisWindow[1]) {
						break
					}
					yvalue = curveDict[k][1]
					polarX = yvalue*Math.cos(-2*Math.PI*wf*xval)
					polarY = yvalue*Math.sin(-2*Math.PI*wf*xval)
					temppointsDictPolarActual.push([polarX,polarY])
				}

				sumX = 0
				sumY = 0

				for(m = 0; m < temppointsDictPolarActual.length; m++) {
					sumX = sumX + temppointsDictPolarActual[m][0]
					sumY = sumY + temppointsDictPolarActual[m][1]

				}

				avgX = sumX/temppointsDictPolarActual.length
				avgY = sumY/temppointsDictPolarActual.length

				tempcOM = [avgX,avgY]

				if (i == 0) {
					finalgraphymax = avgX
					finalgraphymin = avgX
				}
				if (finalgraphymax <= avgX) {
					finalgraphymax = avgX
				}
				if (finalgraphymin >= avgX) {
					finalgraphymin = avgX
				}

				initTransformPointsDict.push([wf,avgX])

			}

			updatefinalgraphAxesTicksAndLabels()
			updategraphAxesFinalPlot()
			plotCOMX()

			for(b=0; b < initTransformPointsDict.length; b++) {
				wf = initTransformPointsDict[b][0]
				avgX = initTransformPointsDict[b][1]
				transformPointsDict.push([finalgraphToSvgX(wf),finalgraphToSvgY(avgX)])
			}

			pString = 'M ' + transformPointsDict[0][0] + " " + transformPointsDict[0][1] + " "

			for(k = 0; k < transformPointsDict.length; k++) {
				pString = pString + 'L ' + transformPointsDict[k][0] + " " + transformPointsDict[k][1] + " ";
			}

			// console.log(pString)

			var pathElement = document.getElementById('final curve path')
			pathElement.setAttribute('d',pString);
				
		}

		plotTransform()

		function transformGraphEvent(event) {
			var rect = event.target.getBoundingClientRect()
			posX = event.clientX - rect.left
			posY = event.clientY - rect.top
			suggestedWF = svgXPercentToFinalGraph(posX*100/rect.width)
			if (suggestedWF < finalgraphxmax && suggestedWF >= 0) {
				windingfrequency = suggestedWF
				document.getElementById('wfSlider').setAttribute('width', (windingfrequency)*100/(maxwindingFrequency) + '%')
				updatePolar()
				plotCenterOfMass()
				plotCOMX()
			} 
		}

		finalgraphSvg.addEventListener('mousemove',transformGraphEvent)

		settingsStateOpen = false

		function openSettings() {
			if(settingsStateOpen == false) {
				document.getElementById('containSettingsDiv').style.height = '100%'
				$('html, body').animate({
					scrollTop: $("#containSettingsDiv").offset().top
				}, 1000);
				settingsStateOpen = true
			}
			else {
				document.getElementById('containSettingsDiv').style.height = '0%'
				$('html, body').animate({
					scrollBottom: $("#containSettingsDiv").offset().bottom
				}, 1000);
				settingsStateOpen = false
			}
					
		}
		document.getElementById('containSettings').addEventListener('click',openSettings)

		wFsliderSvg = document.getElementById('wFsliderSvg')

		var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
		rectElement.setAttribute('height',"100%");
		rectElement.setAttribute('width', (windingfrequency)*100/(maxwindingFrequency) + '%');
		rectElement.setAttribute('id', 'wfSlider');
		rectElement.setAttribute('x', '0%');
		rectElement.setAttribute('y', '0%');
		rectElement.style.opacity = 1;
		rectElement.style.cursor = 'ew-resize';
		rectElement.style.fill = 'hsla(195,100%,50%,0.1)'
		rectElement.style.transition = 'width 0.3s'
		rectElement.style.strokeWidth = '0';
		wFsliderSvg.appendChild(rectElement);
		// XORboxElements.push(rectElement)
		// rectElement.addEventListener('mouseover', statechangeXOR)


		equationLabStateOpen = false

		function openequationLab() {
			if(equationLabStateOpen == false) {
				document.getElementById('containequationLab').style.height = 10 + 40*countWaves + 20 + '%'
				document.getElementById('containAll').style.overflow = 'auto'
				equationLabStateOpen = true
			}
			else {
				document.getElementById('containequationLab').style.height = '0%'
				document.getElementById('containAll').style.overflow = 'hidden'
				equationLabStateOpen = false
				updatePolarAxes()
				updatePolar()
				plotCenterOfMass()
				plotCOMX()
				updatefinalgraphAxesTicksAndLabels()
				updateplotTransform()
				for(i = 0; i < countWaves; i++) {
					document.getElementById('eq ' + i + ' blank text subdiv').innerHTML = ""
				}
			}	
		}

		document.getElementById('containEquationSettings').addEventListener('click',openequationLab)

		function getPercentages(val, vmin, vmax, returntype) {
			if(returntype == 'x') {
				if (vmin != vmax) {
					return (((90 - 10)/(vmax - vmin))*(val - vmin)) + 10
				}
			}
			else if(returntype == 'y') {
				if (vmin != vmax) {
					return (((10 - 90)/(vmax - vmin))*(val - vmin)) + 90
				}
			}
			
		}

		function drawAGraph(data,div,wmin,wmax,xmin,xmax,num) {
			var svgElement = document.createElementNS("http://www.w3.org/2000/svg", 'svg')
			svgElement.setAttribute('id',div.id + " svg")
			svgElement.setAttribute('height','25vh')
			svgElement.setAttribute('width','100%')
			svgElement.setAttribute('viewBox',"0 0 100 100")
			svgElement.setAttribute('preserveAspectRatio', "none")
			svgElement.style.position = 'relative'
			div.appendChild(svgElement)

			if (wmin == wmax) {
				wmax = wmax + 0.5
				wmin = wmin - 0.5
			}

			LUgap = (wmax - wmin)/10



			wmax = wmax + LUgap
			wmin = wmin - LUgap


			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', getPercentages(0,xmin,xmax,'x') + '%');
			lineElement.setAttribute('y1', getPercentages(0,wmin,wmax,'y') + '%');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.setAttribute('x2', getPercentages(xmax,xmin,xmax,'x') + '%')
			lineElement.setAttribute('y2', getPercentages(0,wmin,wmax,'y') + '%');
			lineElement.setAttribute('id', div.id + " yaxis")
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			svgElement.appendChild(lineElement);

			var lineElement = document.createElementNS("http://www.w3.org/2000/svg", 'line');
			lineElement.setAttribute('x1', getPercentages(0,xmin,xmax,'x') + '%');
			lineElement.setAttribute('y1', getPercentages(wmin,wmin,wmax,'y') + '%');
			lineElement.setAttribute('x2', getPercentages(0,xmin,xmax,'x') + '%')
			lineElement.setAttribute('y2', getPercentages(wmax,wmin,wmax,'y') + '%');
			lineElement.setAttribute('vector-effect','non-scaling-stroke');
			lineElement.setAttribute('id', div.id + " xaxis")
			lineElement.style.stroke = 'hsla(32,1%,70%,1)'
			lineElement.style.strokeWidth = '2%';
			svgElement.appendChild(lineElement);

			jump = 3

			pDict = []
			for(m=0; m<curvepoints; m = m+jump) {
				step = (xmax/curvepoints)
				xval = m*step
				yvalue = data[xval]
				pDict.push([getPercentages(xval,xmin,xmax,'x'),getPercentages(yvalue,wmin,wmax,'y')]); 
			}

			pString = 'M ' + pDict[0][0] + " " + pDict[0][1] + " "

			for(k = 0; k < pDict.length; k++) {
				pString = pString + 'L ' + pDict[k][0] + " " + pDict[k][1] + " ";
			}


			var pathElement = document.createElementNS("http://www.w3.org/2000/svg", 'path');
			pathElement.setAttribute('fill','transparent');
			pathElement.setAttribute('vector-effect','non-scaling-stroke');
			pathElement.setAttribute('id',div.id + " path");
			pathElement.setAttribute('d',pString);
			colorC = 'hsla(' + ((num+1)/countWaves)*40 + ',100%,50%,0.5)'
			pathElement.style.strokeWidth = '2%';
			pathElement.setAttribute('stroke', colorC);
			svgElement.appendChild(pathElement);

		}

		function updateAGraph(num) {
			var svgElement = document.getElementById('eq ' + num + 'div svg')

			wavedata = waveStatus[num]
			updateSWave(wavedata, num)

			wavedata = waveStatus[num]
			wmin = wavedata[7]
			wmax = wavedata[8]
			data = wavedata[6]

			xmin = 0
			xmax = graphxmax

			if (wmin == wmax) {
				wmax = wmax + 0.5
				wmin = wmin - 0.5
			}


			LUgap = (wmax - wmin)/10

			wmax = wmax + LUgap
			wmin = wmin - LUgap

			var lineElement = document.getElementById('eq ' + num + ' div yaxis')
			lineElement.setAttribute('x1', getPercentages(0,xmin,xmax,'x') + '%');
			lineElement.setAttribute('y1', getPercentages(0,wmin,wmax,'y') + '%');
			lineElement.setAttribute('x2', getPercentages(xmax,xmin,xmax,'x') + '%')
			lineElement.setAttribute('y2', getPercentages(0,wmin,wmax,'y') + '%');

			var lineElement = document.getElementById('eq ' + num + ' div xaxis')
			lineElement.setAttribute('x1', getPercentages(0,xmin,xmax,'x') + '%');
			lineElement.setAttribute('y1', getPercentages(wmin,wmin,wmax,'y') + '%');
			lineElement.setAttribute('x2', getPercentages(0,xmin,xmax,'x') + '%')
			lineElement.setAttribute('y2', getPercentages(wmax,wmin,wmax,'y') + '%');
			
			jump = 1

			pDict = []
			for(m=0; m<curvepoints; m = m+jump) {
				step = (xmax/curvepoints)
				xval = m*step
				yvalue = data[xval]
				pDict.push([getPercentages(xval,xmin,xmax,'x'),getPercentages(yvalue,wmin,wmax,'y')]); 
			}

			pString = 'M ' + pDict[0][0] + " " + pDict[0][1] + " "

			for(k = 0; k < pDict.length; k++) {
				pString = pString + 'L ' + pDict[k][0] + " " + pDict[k][1] + " ";
			}


			var pathElement = document.getElementById('eq ' + num + ' div path')
			pathElement.setAttribute('d',pString);

		}

		maxSAmplitude = 2
		minSAmplitude = 0

		maxSFrequency = 10
		minSFrequency = 0.1

		maxSPhase = Math.PI/2
		minSPhase = 0

		maxSShift = 1
		minSShift = -1

		controlIDs = {}

		function controlClick(event) {
			ivalue = controlIDs[event.target.id][0]
			typevalue = controlIDs[event.target.id][1]
			mainDIV = document.getElementById('control ' + typevalue + ' ' + ivalue + ' div');
			mainDIV.style.cursor = 'ew-resize'
			svgDIV = document.getElementById('control ' + typevalue + ' ' + ivalue + ' svg');
			svgDIV.style.pointerEvents = 'auto'
			document.getElementById('control ' + typevalue + ' text ' + ivalue + ' div').style.fontWeight = 'bold'
		}

		function updateControlValue(event) {
			ivalue = controlIDs[event.target.id][0]
			typevalue = controlIDs[event.target.id][1]
			rect = document.getElementById('control ' + typevalue + ' ' + ivalue + ' div').getBoundingClientRect()
			if(typevalue == 'amp') {
				maxVal = maxSAmplitude
				minVal = minSAmplitude
				tval = 1
				tstring = 'Amplitude : '
			}
			else if(typevalue == 'freq') {
				maxVal = maxSFrequency
				minVal = minSFrequency
				tval = 2
				tstring = 'Frequency : '
			}
			else if(typevalue == 'phas') {
				maxVal = maxSPhase
				minVal = minSPhase
				tval = 3
				tstring = 'Phase : '
			}
			else if(typevalue == 'shif') {
				maxVal = maxSShift
				minVal = minSShift
				tval = 4
				tstring = 'Shift : '
			}
			changevaluepercent = (event.clientX - rect.left)/rect.width
			changevalue = (maxVal - minVal)*changevaluepercent + minVal
			rectElement = document.getElementById('control ' + typevalue + ' ' + ivalue + ' slider')
			rectElement.setAttribute('width' , (changevaluepercent)*100 + '%')

			waveStatus[ivalue][tval] = changevalue
			document.getElementById('control ' + typevalue + ' text ' + ivalue + ' div').innerHTML = tstring + changevalue.toFixed(2)
			if (waveStatus[ivalue][0] == true) {
				document.getElementById('eq ' + ivalue + ' blank text subdiv').innerHTML = "The tranform result hasn't been updated. Close this section to update it."
			}
			

			updateAGraph(ivalue)
			updateMainGraph()

		}

		function changeSinosoidType(event) {
			ivalue = controlIDs[event.target.id][0]
			typevalue = controlIDs[event.target.id][1]

			if (waveStatus[ivalue][5] == 'cosine') {
				waveStatus[ivalue][5] = 'sine'
			}
			else {
				waveStatus[ivalue][5] = 'cosine'
			}
			

			document.getElementById('control ' + typevalue + ' text ' + ivalue + ' div').innerHTML = 'Type : ' + waveStatus[ivalue][5]

			if (waveStatus[ivalue][0] == true) {
				document.getElementById('eq ' + ivalue + ' blank text subdiv').innerHTML = "The tranform result hasn't been updated. Close this section to update it."
			}

			updateAGraph(ivalue)
			updateMainGraph()

		}


		function changeStatus(event) {
			ivalue = controlIDs[event.target.id][0]
			typevalue = controlIDs[event.target.id][1]

			if (waveStatus[ivalue][0] == true) {
				waveStatus[ivalue][0] = false
				document.getElementById('control ' + typevalue + ' text ' + ivalue + ' div').innerHTML = 'Status : not part of the sum'
				document.getElementById('eq ' + ivalue + ' div').style.opacity = 0.4
			}
			else {
				waveStatus[ivalue][0] = true
				document.getElementById('control ' + typevalue + ' text ' + ivalue + ' div').innerHTML = 'Status : part of the sum'
				document.getElementById('eq ' + ivalue + ' div').style.opacity = 1
			}

			if (waveStatus[ivalue][0] == true) {
				document.getElementById('eq ' + ivalue + ' blank text subdiv').innerHTML = "The tranform result hasn't been updated. Close this section to update it."
			}
			
			updateAGraph(ivalue)
			updateMainGraph()

		}

		function removeDiv(event) {

			ivalue = controlIDs[event.target.id][0]
			typevalue = controlIDs[event.target.id][1]

			delete waveStatus[ivalue]
			
			elm = document.getElementById('eq ' + ivalue + ' div')
			elm.outerHTML = ""
			delete elm

			elm = document.getElementById('eq ' + ivalue + ' blank div')
			elm.outerHTML = ""
			delete elm



			for(i = ivalue + 1; i <countWaves; i++) {
				waveStatus[i - 1] = waveStatus[i]
			}

			delete waveStatus[countWaves - 1]

			console.log(waveStatus)

			countWaves = countWaves - 1

			updateMainGraph()

		}

		function controlOut(event) {
			ivalue = controlIDs[event.target.id][0]
			typevalue = controlIDs[event.target.id][1]
			mainDIV = document.getElementById('control ' + typevalue + ' ' + ivalue + ' div');
			mainDIV.style.cursor = 'pointer'
			svgDIV = document.getElementById('control ' + typevalue + ' ' + ivalue + ' svg');
			svgDIV.style.pointerEvents = 'none'
			document.getElementById('control ' + typevalue + ' text ' + ivalue + ' div').style.fontWeight = 'normal'

		}

		function drawControls(maindiv,stateoptions,indexval) {

			signState = stateoptions[5]
			ampC = stateoptions[0]
			freqC = stateoptions[1]
			phasC = stateoptions[2]
			shifC = stateoptions[3]
			typeval = stateoptions[4]

			var div = document.createElement("div");
			div.id = 'controls ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '100%'
			div.style.height = '10vh'
			div.style.fontSize = '0'
			div.style.overflow = 'hidden'
			maindiv.appendChild(div);

			controldiv = div
			var div = document.createElement("div");
			div.id = 'control amp ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '25%'
			div.style.height = '5vh'
			div.style.display = 'inline-block'
			div.style.cursor = 'pointer'
			div.style.overflow = 'hidden'
			controldiv.appendChild(div);
			controlIDs[div.id] = [indexval,'amp']
			div.addEventListener('mousedown',controlClick)
			div.addEventListener('touchstart',controlClick)
			


			controlsubdiv = div
			var div = document.createElement("div");
			div.id = 'control amp text ' + indexval + ' div';
			div.style.position = "absolute";
			div.innerHTML = 'Amplitude : ' + ampC.toFixed(2);
			div.style.fontSize = '2vh'
			div.style.fontFamily = 'Calibri'
			div.style.textAlign = 'center'
			div.style.top = '50%'
			div.style.left = '50%'
			div.style.pointerEvents = 'none'
			div.style.transform = 'translate(-50%,-50%)'
			controlsubdiv.appendChild(div);
			controlIDs[div.id] = [indexval,'amp']

			var svgElement = document.createElementNS("http://www.w3.org/2000/svg", 'svg')
			svgElement.setAttribute('id','control amp ' + indexval + ' svg')
			svgElement.setAttribute('height','100%')
			svgElement.setAttribute('width','100%')
			svgElement.setAttribute('viewBox',"0 0 100 100")
			svgElement.setAttribute('preserveAspectRatio', "none")
			svgElement.style.position = 'absolute'
			svgElement.style.pointerEvents = 'none'
			svgElement.addEventListener('mousemove',updateControlValue)
			svgElement.addEventListener('mouseout',controlOut)
			svgElement.addEventListener('touchmove', updateControlValue)
			svgElement.addEventListener('touchend', controlOut)
			controlsubdiv.appendChild(svgElement)
			controlIDs[svgElement.id] = [indexval,'amp']

			var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
			rectElement.setAttribute('height',"100%");
			rectElement.setAttribute('width', (ampC - minSAmplitude)*100/(maxSAmplitude - minSAmplitude) + '%');
			rectElement.setAttribute('id','control amp ' + indexval + ' slider')
			rectElement.setAttribute('x', '0%');
			rectElement.setAttribute('y', '0%');
			rectElement.style.opacity = 1;
			rectElement.style.fill = 'hsla(190,100%,50%,0.1)'
			rectElement.style.transition = 'width 0.3s'
			rectElement.style.strokeWidth = '0';
			rectElement.style.pointerEvents = 'none'
			svgElement.appendChild(rectElement);
			controlIDs[rectElement.id] = [indexval,'amp']

			var div = document.createElement("div");
			div.id = 'control freq ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '25%'
			div.style.height = '5vh'
			div.style.display = 'inline-block'
			div.style.cursor = 'pointer'
			div.style.overflow = 'hidden'
			controldiv.appendChild(div);
			controlIDs[div.id] = [indexval,'freq']
			div.addEventListener('mousedown',controlClick)
			div.addEventListener('touchstart',controlClick)

			controlsubdiv = div
			var div = document.createElement("div");
			div.id = 'control freq text ' + indexval + ' div';
			div.style.position = "absolute";
			div.innerHTML = 'Frequency : ' + freqC.toFixed(2);
			div.style.fontSize = '2vh'
			div.style.fontFamily = 'Calibri'
			div.style.textAlign = 'center'
			div.style.top = '50%'
			div.style.left = '50%'
			div.style.pointerEvents = 'none'
			div.style.transform = 'translate(-50%,-50%)'
			controlsubdiv.appendChild(div);
			controlIDs[div.id] = [indexval,'freq']

			var svgElement = document.createElementNS("http://www.w3.org/2000/svg", 'svg')
			svgElement.setAttribute('id','control freq ' + indexval + ' svg')
			svgElement.setAttribute('height','100%')
			svgElement.setAttribute('width','100%')
			svgElement.setAttribute('viewBox',"0 0 100 100")
			svgElement.setAttribute('preserveAspectRatio', "none")
			svgElement.style.position = 'absolute'
			controlsubdiv.appendChild(svgElement)
			controlIDs[svgElement.id] = [indexval,'freq']
			svgElement.style.pointerEvents = 'none'
			svgElement.addEventListener('mousemove',updateControlValue)
			svgElement.addEventListener('mouseout',controlOut)
			svgElement.addEventListener('touchmove', updateControlValue)
			svgElement.addEventListener('touchend', controlOut)

			var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
			rectElement.setAttribute('height',"100%");
			rectElement.setAttribute('width', (freqC - minSFrequency)*100/(maxSFrequency - minSFrequency) + '%');
			rectElement.setAttribute('id','control freq ' + indexval + ' slider')
			rectElement.setAttribute('x', '0%');
			rectElement.setAttribute('y', '0%');
			rectElement.style.opacity = 1;
			rectElement.style.fill = 'hsla(230,100%,50%,0.1)'
			rectElement.style.transition = 'width 0.3s'
			rectElement.style.strokeWidth = '0';
			rectElement.style.pointerEvents = 'none'
			svgElement.appendChild(rectElement);
			controlIDs[rectElement.id] = [indexval,'freq']

			var div = document.createElement("div");
			div.id = 'control phas ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '25%'
			div.style.height = '5vh'
			div.style.display = 'inline-block'
			div.style.cursor = 'pointer'
			div.style.overflow = 'hidden'
			controldiv.appendChild(div);
			controlIDs[div.id] = [indexval,'phas']
			div.addEventListener('mousedown',controlClick)
			div.addEventListener('touchstart',controlClick)

			controlsubdiv = div
			var div = document.createElement("div");
			div.id = 'control phas text ' + indexval + ' div';
			div.style.position = "absolute";
			div.innerHTML = 'Phase : ' + phasC.toFixed(2);
			div.style.fontSize = '2vh'
			div.style.fontFamily = 'Calibri'
			div.style.textAlign = 'center'
			div.style.top = '50%'
			div.style.left = '50%'
			div.style.pointerEvents = 'none'
			div.style.transform = 'translate(-50%,-50%)'
			controlsubdiv.appendChild(div);
			controlIDs[div.id] = [indexval,'phas']

			var svgElement = document.createElementNS("http://www.w3.org/2000/svg", 'svg')
			svgElement.setAttribute('id','control phas ' + indexval + ' svg')
			svgElement.setAttribute('height','100%')
			svgElement.setAttribute('width','100%')
			svgElement.setAttribute('viewBox',"0 0 100 100")
			svgElement.setAttribute('preserveAspectRatio', "none")
			svgElement.style.position = 'absolute'
			controlsubdiv.appendChild(svgElement)
			controlIDs[svgElement.id] = [indexval,'phas']
			svgElement.addEventListener('mousemove',updateControlValue)
			svgElement.addEventListener('mouseout',controlOut)
			svgElement.addEventListener('touchmove', updateControlValue)
			svgElement.addEventListener('touchend', controlOut)
			svgElement.style.pointerEvents = 'none'

			var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
			rectElement.setAttribute('height',"100%");
			rectElement.setAttribute('width', (phasC - minSPhase)*100/(maxSPhase - minSPhase) + '%');
			rectElement.setAttribute('id','control phas ' + indexval + ' slider')
			rectElement.setAttribute('x', '0%');
			rectElement.setAttribute('y', '0%');
			rectElement.style.opacity = 1;
			rectElement.style.fill = 'hsla(270,100%,50%,0.1)'
			rectElement.style.transition = 'width 0.3s'
			rectElement.style.strokeWidth = '0';
			rectElement.style.pointerEvents = 'none'
			svgElement.appendChild(rectElement);
			controlIDs[rectElement.id] = [indexval,'phas']

			var div = document.createElement("div");
			div.id = 'control shif ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '25%'
			div.style.height = '5vh'
			div.style.display = 'inline-block'
			div.style.cursor = 'pointer'
			div.style.overflow = 'hidden'
			controldiv.appendChild(div);
			controlIDs[div.id] = [indexval,'shif']
			div.addEventListener('mousedown',controlClick)
			div.addEventListener('touchstart',controlClick)

			controlsubdiv = div
			var div = document.createElement("div");
			div.id = 'control shif text ' + indexval + ' div';
			div.style.position = "absolute";
			div.innerHTML = 'Shift : ' + shifC.toFixed(2);
			div.style.fontSize = '2vh'
			div.style.fontFamily = 'Calibri'
			div.style.textAlign = 'center'
			div.style.top = '50%'
			div.style.left = '50%'
			div.style.pointerEvents = 'none'
			div.style.transform = 'translate(-50%,-50%)'
			controlsubdiv.appendChild(div);
			controlIDs[div.id] = [indexval,'shif']

			var svgElement = document.createElementNS("http://www.w3.org/2000/svg", 'svg')
			svgElement.setAttribute('id','control shif ' + indexval + ' svg')
			svgElement.setAttribute('height','100%')
			svgElement.setAttribute('width','100%')
			svgElement.setAttribute('viewBox',"0 0 100 100")
			svgElement.setAttribute('preserveAspectRatio', "none")
			svgElement.style.position = 'absolute'
			controlsubdiv.appendChild(svgElement)
			controlIDs[svgElement.id] = [indexval,'shif']
			svgElement.addEventListener('mousemove',updateControlValue)
			svgElement.addEventListener('mouseout',controlOut)
			svgElement.addEventListener('touchmove', updateControlValue)
			svgElement.addEventListener('touchend', controlOut)
			svgElement.style.pointerEvents = 'none'

			var rectElement = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
			rectElement.setAttribute('height',"100%");
			rectElement.setAttribute('width', (shifC - minSShift)*100/(maxSShift - minSShift) + '%');
			rectElement.setAttribute('id','control shif ' + indexval + ' slider')
			rectElement.setAttribute('x', '0%');
			rectElement.setAttribute('y', '0%');
			rectElement.style.opacity = 1;
			rectElement.style.fill = 'hsla(310,100%,50%,0.1)'
			rectElement.style.transition = 'width 0.3s'
			rectElement.style.strokeWidth = '0';
			rectElement.style.pointerEvents = 'none'
			svgElement.appendChild(rectElement);
			controlIDs[rectElement.id] = [indexval,'shif']

			var div = document.createElement("div");
			div.id = 'control type ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '30%'
			div.style.height = '5vh'
			div.style.display = 'inline-block'
			div.style.overflow = 'hidden'
			controldiv.appendChild(div);

			controlsubdiv = div
			var div = document.createElement("div");
			div.id = 'control type text ' + indexval + ' div';
			div.style.position = "absolute";
			div.innerHTML = 'Type : ' + typeval;
			div.style.fontSize = '2vh'
			div.style.fontFamily = 'Calibri'
			div.style.textAlign = 'center'
			div.style.cursor = 'pointer'
			div.style.top = '50%'
			div.style.left = '50%'
			div.style.transform = 'translate(-50%,-50%)'
			controlsubdiv.appendChild(div);
			controlIDs[div.id] = [indexval,'type']
			div.addEventListener('click',changeSinosoidType)

			var div = document.createElement("div");
			div.id = 'control status ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '40%'
			div.style.height = '5vh'
			div.style.display = 'inline-block'
			div.style.overflow = 'hidden'
			controldiv.appendChild(div);

			controlsubdiv = div
			var div = document.createElement("div");
			div.id = 'control status text ' + indexval + ' div';
			div.style.position = "absolute";
			if (signState == true) {
				div.innerHTML = 'Status : part of the sum'
			}
			else {
				div.innerHTML = 'Status : not part of the sum'
			}
			div.style.fontSize = '2vh'
			div.style.fontFamily = 'Calibri'
			div.style.textAlign = 'center'
			div.style.top = '50%'
			div.style.left = '50%'
			div.style.cursor = 'pointer'
			div.style.transform = 'translate(-50%,-50%)'
			controlsubdiv.appendChild(div);
			controlIDs[div.id] = [indexval,'status']
			div.addEventListener('click', changeStatus)

			var div = document.createElement("div");
			div.id = 'control remove ' + indexval + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '30%'
			div.style.height = '5vh'
			div.style.display = 'inline-block'
			div.style.overflow = 'hidden'
			controldiv.appendChild(div);

			controlsubdiv = div
			var div = document.createElement("div");
			div.id = 'control remove text ' + indexval + ' div';
			div.style.position = "absolute";
			div.innerHTML = 'Remove Signal'
			div.style.fontSize = '2vh'
			div.style.fontFamily = 'Calibri'
			div.style.textAlign = 'center'
			div.style.top = '50%'
			div.style.left = '50%'
			div.style.cursor = 'pointer'
			div.style.transform = 'translate(-50%,-50%)'
			controlsubdiv.appendChild(div);
			controlIDs[div.id] = [indexval,'remove']
			div.addEventListener('click',removeDiv)

		}


		for (i=0; i<countWaves; i++) {
			eqSettingDiv = document.getElementById('containequationLab')
			var div = document.createElement("div");
			div.id = 'eq ' + i + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			if (waveStatus[i][0] == false) {
				div.style.opacity = 0.4
			}
			div.style.width = '100%'
			div.style.height = '35vh'
			document.getElementById('containequationLab').appendChild(div);

			var div = document.createElement("div");
			div.id = 'eq ' + i + ' blank div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '100%'
			div.style.height = '5vh'
			document.getElementById('containequationLab').appendChild(div);

			var subdiv = document.createElement("div");
			subdiv.id = 'eq ' + i + ' blank text subdiv';
			subdiv.style.position = "relative";
			subdiv.style.zIndex = '0';
			subdiv.style.position = "absolute";
			subdiv.innerHTML = ''
			subdiv.style.fontSize = '1.6vh'
			subdiv.style.fontFamily = 'Calibri'
			subdiv.style.textAlign = 'center'
			subdiv.style.top = '50%'
			subdiv.style.color = 'hsla(195,100%,50%,0.7)'
			subdiv.style.left = '50%'
			subdiv.style.transform = 'translate(-50%,-50%)'
			div.appendChild(subdiv);


		}

		function addWave() {
			waveStatus[countWaves] = [false,0.5,1,0,0,'cosine',[],0,0]
			wavedata = addSWave(waveStatus[countWaves])
			waveStatus[countWaves][6] = wavedata[0]
			waveStatus[countWaves][7] = wavedata[1]
			waveStatus[countWaves][8] = wavedata[2]

			eqSettingDiv = document.getElementById('containequationLab')
			var div = document.createElement("div");
			div.id = 'eq ' + countWaves + ' div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			if (waveStatus[countWaves][0] == false) {
				div.style.opacity = 0.4
			}
			div.style.width = '100%'
			div.style.height = '35vh'

			document.getElementById('containequationLab').insertBefore(div, document.getElementById('add signal div'));


			var div = document.createElement("div");
			div.id = 'eq ' + countWaves + ' blank div';
			div.style.position = "relative";
			div.style.zIndex = '0';
			div.style.width = '100%'
			div.style.height = '5vh'
			document.getElementById('containequationLab').insertBefore(div, document.getElementById('add signal div'));

			var subdiv = document.createElement("div");
			subdiv.id = 'eq ' + countWaves + ' blank text subdiv';
			subdiv.style.position = "relative";
			subdiv.style.zIndex = '0';
			subdiv.style.position = "absolute";
			subdiv.innerHTML = ''
			subdiv.style.fontSize = '1.6vh'
			subdiv.style.fontFamily = 'Calibri'
			subdiv.style.textAlign = 'center'
			subdiv.style.top = '50%'
			subdiv.style.color = 'hsla(195,100%,50%,0.7)'
			subdiv.style.left = '50%'
			subdiv.style.transform = 'translate(-50%,-50%)'
			div.appendChild(subdiv);

			cw = countWaves

			countWaves = countWaves + 1

			drawAGraph(waveStatus[cw][6],document.getElementById('eq '+ cw + ' div'),waveStatus[cw][7],waveStatus[cw][8],0,graphxmax,cw)

			drawControls(document.getElementById('eq '+ cw + ' div'), [waveStatus[cw][1],waveStatus[cw][2],waveStatus[cw][3],waveStatus[cw][4],waveStatus[cw][5],waveStatus[cw][0]],cw)

			document.getElementById('containequationLab').style.height = 10 + 40*countWaves + 20 + '%'


		}

		var div = document.createElement("div");
		div.id = 'add signal div';
		div.style.position = "relative";
		div.style.zIndex = '0';
		div.style.width = '100%'
		div.style.height = '20vh'
		document.getElementById('containequationLab').appendChild(div);

		var subdiv = document.createElement("div");
		subdiv.id = 'add signal div text';
		subdiv.style.position = "relative";
		subdiv.style.zIndex = '0';
		subdiv.style.position = "absolute";
		subdiv.innerHTML = 'Add Signal'
		subdiv.style.fontSize = '2.5vh'
		subdiv.style.cursor = 'pointer'
		subdiv.style.fontFamily = 'Calibri'
		subdiv.style.textAlign = 'center'
		subdiv.style.top = '50%'
		subdiv.style.color = 'hsla(195,100%,50%,1)'
		subdiv.style.left = '50%'
		subdiv.style.transform = 'translate(-50%,-50%)'
		div.appendChild(subdiv);
		div.addEventListener('click',addWave)

		drawAGraph(waveStatus[0][6],document.getElementById('eq '+ 0 + ' div'),waveStatus[0][7],waveStatus[0][8],0,graphxmax,0)

		drawControls(document.getElementById('eq '+ 0 + ' div'), [waveStatus[0][1],waveStatus[0][2],waveStatus[0][3],waveStatus[0][4],waveStatus[0][5],waveStatus[0][0]],0)

		drawAGraph(waveStatus[1][6],document.getElementById('eq '+ 1 + ' div'),waveStatus[1][7],waveStatus[1][8],0,graphxmax,1)

		drawControls(document.getElementById('eq '+ 1 + ' div'), [waveStatus[1][1],waveStatus[1][2],waveStatus[1][3],waveStatus[1][4],waveStatus[1][5],waveStatus[1][0]],1)



		
		</script>



	</body>
<html>
